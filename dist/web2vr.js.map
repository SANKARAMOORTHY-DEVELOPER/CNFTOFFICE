{"version":3,"sources":["webpack://Web2VR/webpack/universalModuleDefinition","webpack://Web2VR/webpack/bootstrap","webpack://Web2VR/./node_modules/aframe-gif-shader/dist/aframe-gif-shader.js","webpack://Web2VR/./node_modules/deepmerge/dist/cjs.js","webpack://Web2VR/./node_modules/super-hands/index.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/clickable.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/drag-droppable.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/draggable.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/droppable.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/grabbable.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/hoverable.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/prototypes/buttons-proto.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/prototypes/physics-grab-proto.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/stretchable.js","webpack://Web2VR/./node_modules/super-hands/systems/super-hands-system.js","webpack://Web2VR/./src/aframeContext.js","webpack://Web2VR/./src/assetManager.js","webpack://Web2VR/./src/components/animate.js","webpack://Web2VR/./src/components/border.js","webpack://Web2VR/./src/components/grabRotateStatic.js","webpack://Web2VR/./src/components/renderer.js","webpack://Web2VR/./src/components/scrollbar.js","webpack://Web2VR/./src/elements/buttonElement.js","webpack://Web2VR/./src/elements/canvasElement.js","webpack://Web2VR/./src/elements/checkboxElement.js","webpack://Web2VR/./src/elements/containerElement.js","webpack://Web2VR/./src/elements/element.js","webpack://Web2VR/./src/elements/imageElement.js","webpack://Web2VR/./src/elements/inputElement.js","webpack://Web2VR/./src/elements/radioElement.js","webpack://Web2VR/./src/elements/svgElement.js","webpack://Web2VR/./src/elements/textElement.js","webpack://Web2VR/./src/elements/videoElement.js","webpack://Web2VR/./src/plugins/aframe-keyboard.min.js","webpack://Web2VR/./src/plugins/eventListenerListPlugin.js","webpack://Web2VR/./src/scroll.js","webpack://Web2VR/./src/settings.js","webpack://Web2VR/./src/utils/helper.js","webpack://Web2VR/./src/utils/mouseEventHandler.js","webpack://Web2VR/./src/utils/position.js","webpack://Web2VR/./src/web2vr.js","webpack://Web2VR/external \"aframe\""],"names":["AframeContext","settings","inVR","createScene","assetManager","AssetManager","scene","document","getElementsByTagName","length","createElement","body","appendChild","newScene","debug","setAttribute","addEventListener","bind","web2vr","container","classList","add","interactiveTag","width","parseFloat","window","getComputedStyle","scale","x","position","object3D","set","y","z","rotation","parentElement","querySelector","parentSelector","skybox","sky","getElementById","cursor","id","createControllers","raycaster","raycasterFar","superhands","leftHand","rightHand","keyboard","visible","activeInput","e","code","parseInt","detail","value","slice","element","active","update","includes","assets","currentAssetId","getAttribute","updateCurrentAssetId","path","type","getChildren","asset","createAsset","remove","AFRAME","registerComponent","init","running","el","domElement","startAnimation","stopAnimation","tick","schema","color","plane","children","edges","THREE","EdgesGeometry","geometry","line","LineSegments","LineBasicMaterial","linewidth","data","borderObject","aframe","clippingContext","material","clippingPlanes","planes","needsUpdate","borderWidth","borderColor","Color","updateBorder","clone","layerStep","components","grabbed","scroll","hasScroll","elements","updateClipping","obj","hand","grabbers","Math","atan2","sceneEl","renderer","localClippingEnabled","evt","scrollHeight","firstElementChild","style","height","scrollWindowHeight","scrollContainer","clientHeight","scrollY","intersection","uv","shift","pointer","setY","pointEndY","pointStartY","play","scrollbar","setX","setZ","ButtomElement","layer","tagName","textValue","replace","TextElement","CanvasElement","imageId","entity","src","assetId","getAsset","removeAsset","updateImage","toDataURL","Element","CheckBoxElement","specificUpdate","checked","ContainerElement","textOnly","console","log","click","expImageId","oldBackgroundImage","oldDomPosition","backgroundColor","backgroundImage","experimental","equalsDOMPosition","customId","html2canvasIDcounter","html2canvas","onclone","head","sheet","insertRule","removeAttribute","then","canvas","Helper","isUrl","substring","lastIndexOf","updateOpacity","domPosition","alpha","split","a","b","opacity","childElements","Set","contains","paddingToMargin","Position","getBoundingClientRect","parentTransform","needsStartingTransformSize","initHover","mouseEventHandle","MouseEventHandler","resync","animationDuration","transitionDuration","tag","hoverSelectors","has","toLowerCase","classes","cls","push","transform","hoverTransform","depth","startDepth","querySelectorAll","textContent","trim","right","paddingRight","marginRight","initEventHandlers","setupClipping","clientRect","aframePosition","scrollBody","updatePosition","checkVisible","visibility","display","listeningForMouseEvents","checkAnimation","updateTransform","matrixType","values","map","v","matrix","Matrix4","fromArray","Vector3","quaternion","Quaternion","decompose","scalingFactor","setFromRotationMatrix","scaleX","sqrt","scaleY","border","borderTopWidth","borderTopColor","normal","normalMatrix","Matrix3","getNormalMatrix","matrixWorld","output","applyMatrix3","normalize","parentNode","overflow","forceClipping","authority","bottom","Plane","rotateNormal","top","left","getClippingContext","setTimeout","bottomLocal","multiplyScalar","topLocal","leftLocal","rightLocal","bottomGlobal","localToWorld","topGlobal","leftGlobal","rightGlobal","setFromNormalAndCoplanarPoint","showClipping","clippingPlaneHelpers","MeshBasicMaterial","side","DoubleSide","PlaneGeometry","mesh","Mesh","debugPlane","axisHelper","AxesHelper","helper","worldPos","getWorldPosition","point","projectPoint","focalPoint","lookAt","ImageElement","currentSrc","changed","loaded","assetID","isGif","test","InputElement","camera","parent","copy","degToRad","translateX","translateY","translateZ","placeholder","RadioElement","SvgElement","svgString","XMLSerializer","serializeToString","ctx","getContext","DOMURL","self","URL","webkitURL","img","Image","svg","Blob","url","createObjectURL","onload","drawImage","revokeObjectURL","svgToImage","text","fragmentShader","vertexShader","clipping","align","textAlign","lineHeight","currentFont","common","actualFontSize","fontSize","widthInPixels","wrapPixels","textColor","updateTextSize","updateTextAlignment","updateText","updateTextColor","VideoElement","video360","createClickEvent","hasAttribute","image","pause","paused","updateCurrentAssetIdReturn","t","d","exports","n","i","l","call","m","c","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","__esModule","create","prototype","hasOwnProperty","p","s","mode","template","AFK","Error","audio","highlightColor","dismissable","font","locale","model","baseTexture","keyTexture","verticalAlign","draw","attachEventListeners","handleKeyboardPress","handleKeyboardVR","removeEventListeners","removeEventListener","key","charCodeAt","keyCode","target","CustomEvent","dispatchEvent","toggleActiveMode","Event","isMouseEnter","keyboardKeys","activeMode","drawKeyboard","size","firstChild","removeChild","parseKeyObjects","drawButton","name","alt","forEach","_addEventListener","handle","useCapture","eventListenerList","node","eventDetail","addedEvent","_removeEventListener","filter","listener","toString","removedEvent","Scroll","checkScrollbar","createScrollbar","scrollingElement","Settings","ignoreTags","string","regexp","min","max","checkEntityEvents","mouseEvents","mouseProperties","hasMouseEventRegistered","mouseEvent","hasMouseProperty","mouseProperty","addMouseListeners","removeMouseListeners","MouseEvent","eventName","mouseEventHandler","calculateAFramePosition","Web2VR","nodeType","Node","ELEMENT_NODE","Deepmerge","arrayMerge","destination","source","observer","observerConfig","childList","subtree","characterData","attributes","updating","styleSheets","styleSheet","cssRules","rule","CSSStyleRule","selectors","selectorText","selector","sel","substr","error","svgDomElement","styleDefs","sheets","rules","j","elems","cssText","innerHTML","defs","insertBefore","findHoverCss","hasLoaded","once","createContainer","createSky","convertToVR","allLoadedUpdate","interval","setInterval","allLoaded","clearInterval","TEXT_NODE","nodeValue","span","disconnect","replaceWith","observe","ButtonElement","onLoaded","event","child","removeElement","currentNode","generateStyleDefs","addElement","childNodes","addElementChildren","MutationObserver","mutations","mutation","emptyRemove","removedNodes","addedNodes","err"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA,6BAA6B;AAC7B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;;AAEA,qGAAqG,mBAAmB,EAAE,mBAAmB,kGAAkG;;AAE/O;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW;AACX;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,aAAa,gBAAgB;AAC7B,WAAW,gBAAgB;;AAE3B;AACA,WAAW,gBAAgB;AAC3B,gBAAgB;;AAEhB,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA,kDAAkD,sBAAsB;AACxE;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA,cAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN,IAAI;;;AAGJ;AACA;AACA,cAAc,OAAO;AACrB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,OAAO;AACrB,iBAAiB,OAAO;AACxB,iBAAiB,OAAO;AACxB,iBAAiB,MAAM;AACvB,iBAAiB,OAAO;AACxB,iBAAiB,MAAM;AACvB,iBAAiB,KAAK;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,UAAU;AACV;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,IAAI;;;AAGJ;AACA;AACA,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV,QAAQ;AACR,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,gBAAgB;AACtC;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA,IAAI;;;AAGJ;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,MAAM;AACN;AACA,eAAe;AACf;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,cAAc,MAAM;AACpB,cAAc,OAAO;AACrB,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,UAAU;AACV,yDAAyD;AACzD;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,QAAQ;AACR,yDAAyD;AACzD;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;ACrqBa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE,IAAI;AACN;;AAEA;;AAEA;;;;;;;;;;;;ACpIA;;AAEA;AACA;AACA;;AAEA,mBAAO,CAAC,iGAAiC;AACzC,mBAAO,CAAC,uGAAoC;AAC5C,mBAAO,CAAC,uGAAoC;AAC5C,mBAAO,CAAC,2GAAsC;AAC9C,mBAAO,CAAC,iHAAyC;AACjD,mBAAO,CAAC,uGAAoC;AAC5C,mBAAO,CAAC,uGAAoC;AAC5C,mBAAO,CAAC,uGAAoC;;AAE5C;AACA;AACA;AACA;AACA;AACA,oBAAoB,eAAe;AACnC,4BAA4B,cAAc;AAC1C,uBAAuB,kBAAkB;AACzC,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe;AACf,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;;AAEA;AACA;AACA,qBAAqB,uCAAuC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,oBAAoB;AACpB;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gCAAgC;AAC/C;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA,OAAO;AACP;AACA,oBAAoB,UAAU,YAAY,EAAE;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,iBAAiB;AACjB;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,2BAA2B;AAC3B,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,gBAAgB;AACnE;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,gBAAgB;AACnE;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,GAAG;AACH;AACA,4CAA4C,+BAA+B;AAC3E;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,gBAAgB;AACrC;AACA;AACA;AACA,KAAK;AACL,qBAAqB,gBAAgB;AACrC;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,cAAc;AACxD;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACxhBD;AACA,mBAAmB,mBAAO,CAAC,iHAA+B;AAC1D,gEAAgE;AAChE;AACA,cAAc;AACd,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,2DAA2D;AAC3D;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,GAAG;AACH;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,CAAC;;;;;;;;;;;;ACxCD;AACA;AACA,mBAAmB,mBAAO,CAAC,iHAA+B;;AAE1D,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA,mCAAmC;AACnC;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA,iCAAiC;AACjC;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA,CAAC;;;;;;;;;;;;ACvDD;AACA;AACA,mBAAmB,mBAAO,CAAC,iHAA+B;;AAE1D,gDAAgD;AAChD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,2DAA2D;AAC3D;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA,yDAAyD;AACzD;AACA,6BAA6B;AAC7B;AACA,CAAC;;;;;;;;;;;;AC9BD;AACA;AACA,mBAAmB;AACnB,6BAA6B;AAC7B,iCAAiC;AACjC;AACA;AACA;AACA,cAAc,YAAY;AAC1B,iBAAiB,cAAc;AAC/B,kBAAkB,YAAY;AAC9B,kBAAkB;AAClB,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA,+BAA+B;AAC/B;AACA,GAAG;AACH;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,6CAA6C,YAAY;AACzD;AACA;AACA;AACA;AACA,2CAA2C,YAAY;AACvD;AACA,6BAA6B;AAC7B;AACA,CAAC;;;;;;;;;;;;ACnGD;AACA;AACA,oBAAoB,mBAAO,CAAC,2HAAoC;AAChE,oBAAoB,mBAAO,CAAC,iHAA+B;AAC3D;AACA,uBAAuB;AACvB;AACA;AACA,kBAAkB,0BAA0B;AAC5C,aAAa,eAAe;AAC5B,gBAAgB;AAChB,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,uBAAuB;AACvB;AACA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AC7ID;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACrCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,YAAY;AACjC,mBAAmB;AACnB,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AClBD;AACA;AACA;AACA,iBAAiB;AACjB,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;ACpDA;AACA;AACA,oBAAoB,mBAAO,CAAC,iHAA+B;AAC3D;AACA,uBAAuB;AACvB;AACA;AACA,iBAAiB,uBAAuB;AACxC,aAAa,eAAe;AAC5B,wBAAwB;AACxB,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAA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","file":"web2vr.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"aframe\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"aframe\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Web2VR\"] = factory(require(\"aframe\"));\n\telse\n\t\troot[\"Web2VR\"] = factory(root[\"aframe\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE_aframe__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/web2vr.js\");\n","/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n\tvar _gifsparser = __webpack_require__(1);\n\n\tif (typeof AFRAME === 'undefined') {\n\t  throw 'Component attempted to register before AFRAME was available.';\n\t}\n\n\t/* get util from AFRAME */\n\tvar parseUrl = AFRAME.utils.srcLoader.parseUrl;\n\tvar debug = AFRAME.utils.debug;\n\t// debug.enable('shader:gif:*')\n\n\tdebug.enable('shader:gif:warn');\n\tvar warn = debug('shader:gif:warn');\n\tvar log = debug('shader:gif:debug');\n\n\t/* store data so that you won't load same data */\n\tvar gifData = {};\n\n\t/* create error message */\n\tfunction createError(err, src) {\n\t  return { status: 'error', src: src, message: err, timestamp: Date.now() };\n\t}\n\n\tAFRAME.registerShader('gif', {\n\n\t  /**\n\t   * For material component:\n\t   * @see https://github.com/aframevr/aframe/blob/60d198ef8e2bfbc57a13511ae5fca7b62e01691b/src/components/material.js\n\t   * For example of `registerShader`:\n\t   * @see https://github.com/aframevr/aframe/blob/41a50cd5ac65e462120ecc2e5091f5daefe3bd1e/src/shaders/flat.js\n\t   * For MeshBasicMaterial\n\t   * @see http://threejs.org/docs/#Reference/Materials/MeshBasicMaterial\n\t   */\n\n\t  schema: {\n\n\t    /* For material */\n\t    color: { type: 'color' },\n\t    fog: { default: true },\n\n\t    /* For texuture */\n\t    src: { default: null },\n\t    autoplay: { default: true }\n\n\t  },\n\n\t  /**\n\t   * Initialize material. Called once.\n\t   * @protected\n\t   */\n\t  init: function init(data) {\n\t    log('init', data);\n\t    log(this.el.components);\n\t    this.__cnv = document.createElement('canvas');\n\t    this.__cnv.width = 2;\n\t    this.__cnv.height = 2;\n\t    this.__ctx = this.__cnv.getContext('2d');\n\t    this.__texture = new THREE.Texture(this.__cnv); //renders straight from a canvas\n\t    this.__material = {};\n\t    this.__reset();\n\t    this.material = new THREE.MeshBasicMaterial({ map: this.__texture });\n\t    this.el.sceneEl.addBehavior(this);\n\t    this.__addPublicFunctions();\n\t    return this.material;\n\t  },\n\n\n\t  /**\n\t   * Update or create material.\n\t   * @param {object|null} oldData\n\t   */\n\t  update: function update(oldData) {\n\t    log('update', oldData);\n\t    this.__updateMaterial(oldData);\n\t    this.__updateTexture(oldData);\n\t    return this.material;\n\t  },\n\n\n\t  /**\n\t   * Called on each scene tick.\n\t   * @protected\n\t   */\n\t  tick: function tick(t) {\n\t    if (!this.__frames || this.paused()) return;\n\t    if (Date.now() - this.__startTime >= this.__nextFrameTime) {\n\t      this.nextFrame();\n\t    }\n\t  },\n\n\n\t  /*================================\n\t  =            material            =\n\t  ================================*/\n\n\t  /**\n\t   * Updating existing material.\n\t   * @param {object} data - Material component data.\n\t   */\n\t  __updateMaterial: function __updateMaterial(data) {\n\t    var material = this.material;\n\n\t    var newData = this.__getMaterialData(data);\n\t    Object.keys(newData).forEach(function (key) {\n\t      material[key] = newData[key];\n\t    });\n\t  },\n\n\n\t  /**\n\t   * Builds and normalize material data, normalizing stuff along the way.\n\t   * @param {Object} data - Material data.\n\t   * @return {Object} data - Processed material data.\n\t   */\n\t  __getMaterialData: function __getMaterialData(data) {\n\t    return {\n\t      fog: data.fog,\n\t      color: new THREE.Color(data.color)\n\t    };\n\t  },\n\n\n\t  /*==============================\n\t  =            texure            =\n\t  ==============================*/\n\n\t  /**\n\t   * set texure\n\t   * @private\n\t   * @param {Object} data\n\t   * @property {string} status - success / error\n\t   * @property {string} src - src url\n\t   * @property {array} times - array of time length of each image\n\t   * @property {number} cnt - total counts of gif images\n\t   * @property {array} frames - array of each image\n\t   * @property {Date} timestamp - created at the texure\n\t   */\n\n\t  __setTexure: function __setTexure(data) {\n\t    log('__setTexure', data);\n\t    if (data.status === 'error') {\n\t      warn('Error: ' + data.message + '\\nsrc: ' + data.src);\n\t      this.__reset();\n\t    } else if (data.status === 'success' && data.src !== this.__textureSrc) {\n\t      this.__reset();\n\t      /* Texture added or changed */\n\t      this.__ready(data);\n\t    }\n\t  },\n\n\n\t  /**\n\t   * Update or create texure.\n\t   * @param {Object} data - Material component data.\n\t   */\n\t  __updateTexture: function __updateTexture(data) {\n\t    var src = data.src;\n\t    var autoplay = data.autoplay;\n\n\t    /* autoplay */\n\n\t    if (typeof autoplay === 'boolean') {\n\t      this.__autoplay = autoplay;\n\t    } else if (typeof autoplay === 'undefined') {\n\t      this.__autoplay = true;\n\t    }\n\t    if (this.__autoplay && this.__frames) {\n\t      this.play();\n\t    }\n\n\t    /* src */\n\t    if (src) {\n\t      this.__validateSrc(src, this.__setTexure.bind(this));\n\t    } else {\n\t      /* Texture removed */\n\t      this.__reset();\n\t    }\n\t  },\n\n\n\t  /*=============================================\n\t  =            varidation for texure            =\n\t  =============================================*/\n\n\t  __validateSrc: function __validateSrc(src, cb) {\n\n\t    /* check if src is a url */\n\t    var url = parseUrl(src);\n\t    if (url) {\n\t      this.__getImageSrc(url, cb);\n\t      return;\n\t    }\n\n\t    var message = void 0;\n\n\t    /* check if src is a query selector */\n\t    var el = this.__validateAndGetQuerySelector(src);\n\t    if (!el || (typeof el === 'undefined' ? 'undefined' : _typeof(el)) !== 'object') {\n\t      return;\n\t    }\n\t    if (el.error) {\n\t      message = el.error;\n\t    } else {\n\t      var tagName = el.tagName.toLowerCase();\n\t      if (tagName === 'video') {\n\t        src = el.src;\n\t        message = 'For video, please use `aframe-video-shader`';\n\t      } else if (tagName === 'img') {\n\t        this.__getImageSrc(el.src, cb);\n\t        return;\n\t      } else {\n\t        message = 'For <' + tagName + '> element, please use `aframe-html-shader`';\n\t      }\n\t    }\n\n\t    /* if there is message, create error data */\n\t    if (message) {\n\t      (function () {\n\t        var srcData = gifData[src];\n\t        var errData = createError(message, src);\n\t        /* callbacks */\n\t        if (srcData && srcData.callbacks) {\n\t          srcData.callbacks.forEach(function (cb) {\n\t            return cb(errData);\n\t          });\n\t        } else {\n\t          cb(errData);\n\t        }\n\t        /* overwrite */\n\t        gifData[src] = errData;\n\t      })();\n\t    }\n\t  },\n\n\n\t  /**\n\t   * Validate src is a valid image url\n\t   * @param  {string} src - url that will be tested\n\t   * @param  {function} cb - callback with the test result\n\t   */\n\t  __getImageSrc: function __getImageSrc(src, cb) {\n\t    var _this = this;\n\n\t    /* if src is same as previous, ignore this */\n\t    if (src === this.__textureSrc) {\n\t      return;\n\t    }\n\n\t    /* check if we already get the srcData */\n\t    var srcData = gifData[src];\n\t    if (!srcData || !srcData.callbacks) {\n\t      /* create callback */\n\t      srcData = gifData[src] = { callbacks: [] };\n\t      srcData.callbacks.push(cb);\n\t    } else if (srcData.src) {\n\t      cb(srcData);\n\t      return;\n\t    } else if (srcData.callbacks) {\n\t      /* add callback */\n\t      srcData.callbacks.push(cb);\n\t      return;\n\t    }\n\t    var tester = new Image();\n\t    tester.crossOrigin = 'Anonymous';\n\t    tester.addEventListener('load', function (e) {\n\t      /* check if it is gif */\n\t      _this.__getUnit8Array(src, function (arr) {\n\t        if (!arr) {\n\t          onError('This is not gif. Please use `shader:flat` instead');\n\t          return;\n\t        }\n\t        /* parse data */\n\t        (0, _gifsparser.parseGIF)(arr, function (times, cnt, frames) {\n\t          /* store data */\n\t          var newData = { status: 'success', src: src, times: times, cnt: cnt, frames: frames, timestamp: Date.now() };\n\t          /* callbacks */\n\t          if (srcData.callbacks) {\n\t            srcData.callbacks.forEach(function (cb) {\n\t              return cb(newData);\n\t            });\n\t            /* overwrite */\n\t            gifData[src] = newData;\n\t          }\n\t        }, function (err) {\n\t          return onError(err);\n\t        });\n\t      });\n\t    });\n\t    tester.addEventListener('error', function (e) {\n\t      return onError('Could be the following issue\\n - Not Image\\n - Not Found\\n - Server Error\\n - Cross-Origin Issue');\n\t    });\n\t    function onError(message) {\n\t      /* create error data */\n\t      var errData = createError(message, src);\n\t      /* callbacks */\n\t      if (srcData.callbacks) {\n\t        srcData.callbacks.forEach(function (cb) {\n\t          return cb(errData);\n\t        });\n\t        /* overwrite */\n\t        gifData[src] = errData;\n\t      }\n\t    }\n\t    tester.src = src;\n\t  },\n\n\n\t  /**\n\t   *\n\t   * get mine type\n\t   *\n\t   */\n\t  __getUnit8Array: function __getUnit8Array(src, cb) {\n\t    if (typeof cb !== 'function') {\n\t      return;\n\t    }\n\n\t    var xhr = new XMLHttpRequest();\n\t    xhr.open('GET', src);\n\t    xhr.responseType = 'arraybuffer';\n\t    xhr.addEventListener('load', function (e) {\n\t      var uint8Array = new Uint8Array(e.target.response);\n\t      var arr = uint8Array.subarray(0, 4);\n\t      // const header = arr.map(value => value.toString(16)).join('')\n\t      var header = '';\n\t      for (var i = 0; i < arr.length; i++) {\n\t        header += arr[i].toString(16);\n\t      }\n\t      if (header === '47494638') {\n\t        cb(uint8Array);\n\t      } else {\n\t        cb();\n\t      }\n\t    });\n\t    xhr.addEventListener('error', function (e) {\n\t      log(e);\n\t      cb();\n\t    });\n\t    xhr.send();\n\t  },\n\n\n\t  /**\n\t   * Query and validate a query selector,\n\t   *\n\t   * @param  {string} selector - DOM selector.\n\t   * @return {object} Selected DOM element | error message object.\n\t   */\n\t  __validateAndGetQuerySelector: function __validateAndGetQuerySelector(selector) {\n\t    try {\n\t      var el = document.querySelector(selector);\n\t      if (!el) {\n\t        return { error: 'No element was found matching the selector' };\n\t      }\n\t      return el;\n\t    } catch (e) {\n\t      // Capture exception if it's not a valid selector.\n\t      return { error: 'no valid selector' };\n\t    }\n\t  },\n\n\n\t  /*================================\n\t  =            playback            =\n\t  ================================*/\n\n\t  /**\n\t   * add public functions\n\t   * @private\n\t   */\n\t  __addPublicFunctions: function __addPublicFunctions() {\n\t    this.el.gif = {\n\t      play: this.play.bind(this),\n\t      pause: this.pause.bind(this),\n\t      togglePlayback: this.togglePlayback.bind(this),\n\t      paused: this.paused.bind(this),\n\t      nextFrame: this.nextFrame.bind(this)\n\t    };\n\t  },\n\n\n\t  /**\n\t   * Pause gif\n\t   * @public\n\t   */\n\t  pause: function pause() {\n\t    log('pause');\n\t    this.__paused = true;\n\t  },\n\n\n\t  /**\n\t   * Play gif\n\t   * @public\n\t   */\n\t  play: function play() {\n\t    log('play');\n\t    this.__paused = false;\n\t  },\n\n\n\t  /**\n\t   * Toggle playback. play if paused and pause if played.\n\t   * @public\n\t   */\n\n\t  togglePlayback: function togglePlayback() {\n\n\t    if (this.paused()) {\n\t      this.play();\n\t    } else {\n\t      this.pause();\n\t    }\n\t  },\n\n\n\t  /**\n\t   * Return if the playback is paused.\n\t   * @public\n\t   * @return {boolean}\n\t   */\n\t  paused: function paused() {\n\t    return this.__paused;\n\t  },\n\n\n\t  /**\n\t   * Go to next frame\n\t   * @public\n\t   */\n\t  nextFrame: function nextFrame() {\n\t\tthis.__clearCanvas();\n\t    this.__draw();\n\n\t    /* update next frame time */\n\t    while (Date.now() - this.__startTime >= this.__nextFrameTime) {\n\n\t      this.__nextFrameTime += this.__delayTimes[this.__frameIdx++];\n\t      if ((this.__infinity || this.__loopCnt) && this.__frameCnt <= this.__frameIdx) {\n\t        /* go back to the first */\n\t        this.__frameIdx = 0;\n\t      }\n\t    }\n\t  },\n\n\n\t  /*==============================\n\t   =            canvas            =\n\t   ==============================*/\n\n\t  /**\n\t   * clear canvas\n\t   * @private\n\t   */\n\t  __clearCanvas: function __clearCanvas() {\n\t    this.__ctx.clearRect(0, 0, this.__width, this.__height);\n\t    this.__texture.needsUpdate = true;\n\t  },\n\n\n\t  /**\n\t   * draw\n\t   * @private\n\t   */\n\t  __draw: function __draw() {\n\t    this.__ctx.drawImage(this.__frames[this.__frameIdx], 0, 0, this.__width, this.__height);\n\t    this.__texture.needsUpdate = true;\n\t  },\n\n\n\t  /*============================\n\t  =            ready            =\n\t  ============================*/\n\n\t  /**\n\t   * setup gif animation and play if autoplay is true\n\t   * @private\n\t   * @property {string} src - src url\n\t   * @param {array} times - array of time length of each image\n\t   * @param {number} cnt - total counts of gif images\n\t   * @param {array} frames - array of each image\n\t   */\n\t  __ready: function __ready(_ref) {\n\t    var src = _ref.src;\n\t    var times = _ref.times;\n\t    var cnt = _ref.cnt;\n\t    var frames = _ref.frames;\n\n\t    log('__ready');\n\t    this.__textureSrc = src;\n\t    this.__delayTimes = times;\n\t    cnt ? this.__loopCnt = cnt : this.__infinity = true;\n\t    this.__frames = frames;\n\t    this.__frameCnt = times.length;\n\t    this.__startTime = Date.now();\n\t    this.__width = THREE.Math.floorPowerOfTwo(frames[0].width);\n\t    this.__height = THREE.Math.floorPowerOfTwo(frames[0].height);\n\t    this.__cnv.width = this.__width;\n\t    this.__cnv.height = this.__height;\n\t    this.__draw();\n\t    if (this.__autoplay) {\n\t      this.play();\n\t    } else {\n\t      this.pause();\n\t    }\n\t  },\n\n\n\t  /*=============================\n\t  =            reset            =\n\t  =============================*/\n\n\t  /**\n\t   * @private\n\t   */\n\n\t  __reset: function __reset() {\n\t    this.pause();\n\t    this.__clearCanvas();\n\t    this.__startTime = 0;\n\t    this.__nextFrameTime = 0;\n\t    this.__frameIdx = 0;\n\t    this.__frameCnt = 0;\n\t    this.__delayTimes = null;\n\t    this.__infinity = false;\n\t    this.__loopCnt = 0;\n\t    this.__frames = null;\n\t    this.__textureSrc = null;\n\t  }\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\t/**\n\t * \n\t * Gif parser by @gtk2k\n\t * https://github.com/gtk2k/gtk2k.github.io/tree/master/animation_gif\n\t *\n\t */\n\n\texports.parseGIF = function (gif, successCB, errorCB) {\n\n\t  var pos = 0;\n\t  var delayTimes = [];\n\t  var loadCnt = 0;\n\t  var graphicControl = null;\n\t  var imageData = null;\n\t  var frames = [];\n\t  var loopCnt = 0;\n\t  if (gif[0] === 0x47 && gif[1] === 0x49 && gif[2] === 0x46 && // 'GIF'\n\t  gif[3] === 0x38 && gif[4] === 0x39 && gif[5] === 0x61) {\n\t    // '89a'\n\t    pos += 13 + +!!(gif[10] & 0x80) * Math.pow(2, (gif[10] & 0x07) + 1) * 3;\n\t    var gifHeader = gif.subarray(0, pos);\n\t    while (gif[pos] && gif[pos] !== 0x3b) {\n\t      var offset = pos,\n\t          blockId = gif[pos];\n\t      if (blockId === 0x21) {\n\t        var label = gif[++pos];\n\t        if ([0x01, 0xfe, 0xf9, 0xff].indexOf(label) !== -1) {\n\t          label === 0xf9 && delayTimes.push((gif[pos + 3] + (gif[pos + 4] << 8)) * 10);\n\t          label === 0xff && (loopCnt = gif[pos + 15] + (gif[pos + 16] << 8));\n\t          while (gif[++pos]) {\n\t            pos += gif[pos];\n\t          }label === 0xf9 && (graphicControl = gif.subarray(offset, pos + 1));\n\t        } else {\n\t          errorCB && errorCB('parseGIF: unknown label');break;\n\t        }\n\t      } else if (blockId === 0x2c) {\n\t        pos += 9;\n\t        pos += 1 + +!!(gif[pos] & 0x80) * (Math.pow(2, (gif[pos] & 0x07) + 1) * 3);\n\t        while (gif[++pos]) {\n\t          pos += gif[pos];\n\t        }var imageData = gif.subarray(offset, pos + 1);\n\t        frames.push(URL.createObjectURL(new Blob([gifHeader, graphicControl, imageData])));\n\t      } else {\n\t        errorCB && errorCB('parseGIF: unknown blockId');break;\n\t      }\n\t      pos++;\n\t    }\n\t  } else {\n\t    errorCB && errorCB('parseGIF: no GIF89a');\n\t  }\n\t  if (frames.length) {\n\n\t    var cnv = document.createElement('canvas');\n\t    var loadImg = function loadImg() {\n\t      frames.forEach(function (src, i) {\n\t        var img = new Image();\n\t        img.onload = function (e, i) {\n\t          if (i === 0) {\n\t            cnv.width = img.width;\n\t            cnv.height = img.height;\n\t          }\n\t          loadCnt++;\n\t          frames[i] = this;\n\t          if (loadCnt === frames.length) {\n\t            loadCnt = 0;\n\t            imageFix(1);\n\t          }\n\t        }.bind(img, null, i);\n\t        img.src = src;\n\t      });\n\t    };\n\t    var imageFix = function imageFix(i) {\n\t      var img = new Image();\n\t      img.onload = function (e, i) {\n\t        loadCnt++;\n\t        frames[i] = this;\n\t        if (loadCnt === frames.length) {\n\t          cnv = null;\n\t          successCB && successCB(delayTimes, loopCnt, frames);\n\t        } else {\n\t          imageFix(++i);\n\t        }\n\t      }.bind(img);\n\t      img.src = cnv.toDataURL('image/gif');\n\t    };\n\t    loadImg();\n\t  }\n\t};\n\n/***/ }\n/******/ ]);\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","/* global AFRAME */\n\nif (typeof AFRAME === 'undefined') {\n  throw new Error('Component attempted to register before AFRAME was available.')\n}\n\nrequire('./systems/super-hands-system.js')\nrequire('./reaction_components/hoverable.js')\nrequire('./reaction_components/grabbable.js')\nrequire('./reaction_components/stretchable.js')\nrequire('./reaction_components/drag-droppable.js')\nrequire('./reaction_components/draggable.js')\nrequire('./reaction_components/droppable.js')\nrequire('./reaction_components/clickable.js')\n\n/**\n * Super Hands component for A-Frame.\n */\nAFRAME.registerComponent('super-hands', {\n  schema: {\n    colliderEvent: {default: 'hit'},\n    colliderEventProperty: {default: 'el'},\n    colliderEndEvent: {default: 'hitend'},\n    colliderEndEventProperty: {default: 'el'},\n    grabStartButtons: {\n      default: ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose',\n        'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown',\n        'pointup', 'thumbup', 'pointingstart', 'pistolstart',\n        'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    grabEndButtons: {\n      default: ['gripup', 'trackpadup', 'triggerup', 'gripopen',\n        'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup',\n        'pointdown', 'thumbdown', 'pointingend', 'pistolend',\n        'thumbstickup', 'mouseup', 'touchend']\n    },\n    stretchStartButtons: {\n      default: ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose',\n        'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown',\n        'pointup', 'thumbup', 'pointingstart', 'pistolstart',\n        'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    stretchEndButtons: {\n      default: ['gripup', 'trackpadup', 'triggerup', 'gripopen',\n        'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup',\n        'pointdown', 'thumbdown', 'pointingend', 'pistolend',\n        'thumbstickup', 'mouseup', 'touchend']\n    },\n    dragDropStartButtons: {\n      default: ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose',\n        'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown',\n        'pointup', 'thumbup', 'pointingstart', 'pistolstart',\n        'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    dragDropEndButtons: {\n      default: ['gripup', 'trackpadup', 'triggerup', 'gripopen',\n        'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup',\n        'pointdown', 'thumbdown', 'pointingend', 'pistolend',\n        'thumbstickup', 'mouseup', 'touchend']\n    },\n    interval: { default: 0 }\n  },\n\n  /**\n   * Set if component needs multiple instancing.\n   */\n  multiple: false,\n\n  /**\n   * Called once when component is attached. Generally for initial setup.\n   */\n  init: function () {\n    // constants\n    this.HOVER_EVENT = 'hover-start'\n    this.UNHOVER_EVENT = 'hover-end'\n    this.GRAB_EVENT = 'grab-start'\n    this.UNGRAB_EVENT = 'grab-end'\n    this.STRETCH_EVENT = 'stretch-start'\n    this.UNSTRETCH_EVENT = 'stretch-end'\n    this.DRAG_EVENT = 'drag-start'\n    this.UNDRAG_EVENT = 'drag-end'\n    this.DRAGOVER_EVENT = 'dragover-start'\n    this.UNDRAGOVER_EVENT = 'dragover-end'\n    this.DRAGDROP_EVENT = 'drag-drop'\n\n    // links to other systems/components\n    this.otherSuperHand = null\n\n    // state tracking - global event handlers (GEH)\n    this.gehDragged = new Set()\n    this.gehClicking = new Set()\n\n    // state tracking - reaction components\n    this.hoverEls = []\n    this.hoverElsIntersections = []\n    this.prevCheckTime = null\n    this.state = new Map()\n    this.dragging = false\n\n    this.unHover = this.unHover.bind(this)\n    this.unWatch = this.unWatch.bind(this)\n    this.onHit = this.onHit.bind(this)\n    this.onGrabStartButton = this.onGrabStartButton.bind(this)\n    this.onGrabEndButton = this.onGrabEndButton.bind(this)\n    this.onStretchStartButton = this.onStretchStartButton.bind(this)\n    this.onStretchEndButton = this.onStretchEndButton.bind(this)\n    this.onDragDropStartButton = this.onDragDropStartButton.bind(this)\n    this.onDragDropEndButton = this.onDragDropEndButton.bind(this)\n    this.system.registerMe(this)\n  },\n\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function (oldData) {\n    this.unRegisterListeners(oldData)\n    this.registerListeners()\n  },\n\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function () {\n    this.system.unregisterMe(this)\n    this.unRegisterListeners()\n    this.hoverEls.length = 0\n    if (this.state.get(this.HOVER_EVENT)) {\n      this._unHover(this.state.get(this.HOVER_EVENT))\n    }\n    this.onGrabEndButton()\n    this.onStretchEndButton()\n    this.onDragDropEndButton()\n  },\n  tick: (function () {\n    // closer objects and objects with no distance come later in list\n    function sorter (a, b) {\n      const aDist = a.distance == null ? -1 : a.distance\n      const bDist = b.distance == null ? -1 : b.distance\n      if (aDist < bDist) {\n        return 1\n      }\n      if (bDist < aDist) {\n        return -1\n      }\n      return 0\n    }\n    return function (time) {\n      const data = this.data\n      const prevCheckTime = this.prevCheckTime\n      if (prevCheckTime && (time - prevCheckTime < data.interval)) { return }\n      this.prevCheckTime = time\n\n      let orderChanged = false\n      this.hoverElsIntersections.sort(sorter)\n      for (let i = 0; i < this.hoverElsIntersections.length; i++) {\n        if (this.hoverEls[i] !== this.hoverElsIntersections[i].object.el) {\n          orderChanged = true\n          this.hoverEls[i] = this.hoverElsIntersections[i].object.el\n        }\n      }\n      if (orderChanged) {\n        this.hover()\n      }\n    }\n  })(),\n  onGrabStartButton: function (evt) {\n    let carried = this.state.get(this.GRAB_EVENT)\n    this.dispatchMouseEventAll('mousedown', this.el)\n    this.gehClicking = new Set(this.hoverEls)\n    if (!carried) {\n      carried = this.findTarget(this.GRAB_EVENT, {\n        hand: this.el,\n        buttonEvent: evt\n      })\n      if (carried) {\n        this.state.set(this.GRAB_EVENT, carried)\n        this._unHover(carried)\n      }\n    }\n  },\n  onGrabEndButton: function (evt) {\n    const clickables = this.hoverEls.filter(h => this.gehClicking.has(h))\n    const grabbed = this.state.get(this.GRAB_EVENT)\n    const endEvt = {hand: this.el, buttonEvent: evt}\n    this.dispatchMouseEventAll('mouseup', this.el)\n    for (let i = 0; i < clickables.length; i++) {\n      this.dispatchMouseEvent(clickables[i], 'click', this.el)\n    }\n    this.gehClicking.clear()\n    // check if grabbed entity accepts ungrab event\n    if (grabbed && !this.emitCancelable(grabbed, this.UNGRAB_EVENT, endEvt)) {\n      /* push to top of stack so a drop followed by re-grab gets the same\n         target */\n      this.promoteHoveredEl(this.state.get(this.GRAB_EVENT))\n      this.state.delete(this.GRAB_EVENT)\n      this.hover()\n    }\n  },\n  onStretchStartButton: function (evt) {\n    let stretched = this.state.get(this.STRETCH_EVENT)\n    if (!stretched) {\n      stretched = this.findTarget(this.STRETCH_EVENT, {\n        hand: this.el,\n        buttonEvent: evt\n      })\n      if (stretched) {\n        this.state.set(this.STRETCH_EVENT, stretched)\n        this._unHover(stretched)\n      }\n    }\n  },\n  onStretchEndButton: function (evt) {\n    const stretched = this.state.get(this.STRETCH_EVENT)\n    const endEvt = {hand: this.el, buttonEvent: evt}\n    // check if end event accepted\n    if (stretched &&\n        !this.emitCancelable(stretched, this.UNSTRETCH_EVENT, endEvt)) {\n      this.promoteHoveredEl(stretched)\n      this.state.delete(this.STRETCH_EVENT)\n      this.hover()\n    }\n  },\n  onDragDropStartButton: function (evt) {\n    let dragged = this.state.get(this.DRAG_EVENT)\n    this.dragging = true\n    if (this.hoverEls.length) {\n      this.gehDragged = new Set(this.hoverEls)\n      this.dispatchMouseEventAll('dragstart', this.el)\n    }\n    if (!dragged) {\n      /* prefer carried so that a drag started after a grab will work\n       with carried element rather than a currently intersected drop target.\n       fall back to queue in case a drag is initiated independent\n       of a grab */\n      if (this.state.get(this.GRAB_EVENT) &&\n          !this.emitCancelable(this.state.get(this.GRAB_EVENT), this.DRAG_EVENT,\n              {hand: this.el, buttonEvent: evt})) {\n        dragged = this.state.get(this.GRAB_EVENT)\n      } else {\n        dragged = this.findTarget(this.DRAG_EVENT, {\n          hand: this.el,\n          buttonEvent: evt\n        })\n      }\n      if (dragged) {\n        this.state.set(this.DRAG_EVENT, dragged)\n        this._unHover(dragged)\n      }\n    }\n  },\n  onDragDropEndButton: function (evt) {\n    const carried = this.state.get(this.DRAG_EVENT)\n    this.dragging = false // keep _unHover() from activating another droptarget\n    this.gehDragged.forEach(carried => {\n      this.dispatchMouseEvent(carried, 'dragend', this.el)\n      // fire event both ways for all intersected targets\n      this.dispatchMouseEventAll('drop', carried, true, true)\n      this.dispatchMouseEventAll('dragleave', carried, true, true)\n    })\n    this.gehDragged.clear()\n    if (carried) {\n      const ddEvt = {\n        hand: this.el,\n        dropped: carried,\n        on: null,\n        buttonEvent: evt\n      }\n      const endEvt = {hand: this.el, buttonEvent: evt}\n      const dropTarget = this.findTarget(this.DRAGDROP_EVENT, ddEvt, true)\n      if (dropTarget) {\n        ddEvt.on = dropTarget\n        this.emitCancelable(carried, this.DRAGDROP_EVENT, ddEvt)\n        this._unHover(dropTarget)\n      }\n      // check if end event accepted\n      if (!this.emitCancelable(carried, this.UNDRAG_EVENT, endEvt)) {\n        this.promoteHoveredEl(carried)\n        this.state.delete(this.DRAG_EVENT)\n        this.hover()\n      }\n    }\n  },\n  processHitEl: function (hitEl, intersection) {\n    const dist = intersection && intersection.distance\n    const sects = this.hoverElsIntersections\n    const hoverEls = this.hoverEls\n    const hitElIndex = this.hoverEls.indexOf(hitEl)\n    let hoverNeedsUpdate = false\n    if (hitElIndex === -1) {\n      hoverNeedsUpdate = true\n      // insert in order of distance when available\n      if (dist != null) {\n        let i = 0\n        while (i < sects.length && dist < sects[i].distance) { i++ }\n        hoverEls.splice(i, 0, hitEl)\n        sects.splice(i, 0, intersection)\n      } else {\n        hoverEls.push(hitEl)\n        sects.push({ object: { el: hitEl } })\n      }\n      this.dispatchMouseEvent(hitEl, 'mouseover', this.el)\n      if (this.dragging && this.gehDragged.size) {\n        // events on targets and on dragged\n        this.gehDragged.forEach(dragged => {\n          this.dispatchMouseEventAll('dragenter', dragged, true, true)\n        })\n      }\n    }\n    return hoverNeedsUpdate\n  },\n  onHit: function (evt) {\n    const hitEl = evt.detail[this.data.colliderEventProperty]\n    let hoverNeedsUpdate = 0\n    if (!hitEl) { return }\n    if (Array.isArray(hitEl)) {\n      for (let i = 0, sect; i < hitEl.length; i++) {\n        sect = evt.detail.intersections && evt.detail.intersections[i]\n        hoverNeedsUpdate += this.processHitEl(hitEl[i], sect)\n      }\n    } else {\n      hoverNeedsUpdate += this.processHitEl(hitEl, null)\n    }\n    if (hoverNeedsUpdate) { this.hover() }\n  },\n  /* search collided entities for target to hover/dragover */\n  hover: function () {\n    var hvrevt, hoverEl\n    // end previous hover\n    if (this.state.has(this.HOVER_EVENT)) {\n      this._unHover(this.state.get(this.HOVER_EVENT), true)\n    }\n    if (this.state.has(this.DRAGOVER_EVENT)) {\n      this._unHover(this.state.get(this.DRAGOVER_EVENT), true)\n    }\n    if (this.dragging && this.state.get(this.DRAG_EVENT)) {\n      hvrevt = {\n        hand: this.el,\n        hovered: hoverEl,\n        carried: this.state.get(this.DRAG_EVENT)\n      }\n      hoverEl = this.findTarget(this.DRAGOVER_EVENT, hvrevt, true)\n      if (hoverEl) {\n        this.emitCancelable(this.state.get(this.DRAG_EVENT), this.DRAGOVER_EVENT, hvrevt)\n        this.state.set(this.DRAGOVER_EVENT, hoverEl)\n      }\n    }\n    // fallback to hover if not dragging or dragover wasn't successful\n    if (!this.state.has(this.DRAGOVER_EVENT)) {\n      hoverEl = this.findTarget(this.HOVER_EVENT, { hand: this.el }, true)\n      if (hoverEl) {\n        this.state.set(this.HOVER_EVENT, hoverEl)\n      }\n    }\n  },\n  /* called when controller moves out of collision range of entity */\n  unHover: function (evt) {\n    const clearedEls = evt.detail[this.data.colliderEndEventProperty]\n    if (clearedEls) {\n      if (Array.isArray(clearedEls)) {\n        clearedEls.forEach(el => this._unHover(el))\n      } else {\n        this._unHover(clearedEls)\n      }\n    }\n  },\n  /* inner unHover steps needed regardless of cause of unHover */\n  _unHover: function (el, skipNextHover) {\n    let unHovered = false\n    let evt\n    if (el === this.state.get(this.DRAGOVER_EVENT)) {\n      this.state.delete(this.DRAGOVER_EVENT)\n      unHovered = true\n      evt = {\n        hand: this.el,\n        hovered: el,\n        carried: this.state.get(this.DRAG_EVENT)\n      }\n      this.emitCancelable(el, this.UNDRAGOVER_EVENT, evt)\n      if (this.state.has(this.DRAG_EVENT)) {\n        this.emitCancelable(\n          this.state.get(this.DRAG_EVENT),\n          this.UNDRAGOVER_EVENT,\n          evt\n        )\n      }\n    }\n    if (el === this.state.get(this.HOVER_EVENT)) {\n      this.state.delete(this.HOVER_EVENT)\n      unHovered = true\n      this.emitCancelable(el, this.UNHOVER_EVENT, { hand: this.el })\n    }\n    // activate next target, if present\n    if (unHovered && !skipNextHover) {\n      this.hover()\n    }\n  },\n  unWatch: function (evt) {\n    const clearedEls = evt.detail[this.data.colliderEndEventProperty]\n    if (clearedEls) {\n      if (Array.isArray(clearedEls)) {\n        clearedEls.forEach(el => this._unWatch(el))\n      } else {\n        // deprecation path: sphere-collider\n        this._unWatch(clearedEls)\n      }\n    }\n  },\n  _unWatch: function (target) {\n    var hoverIndex = this.hoverEls.indexOf(target)\n    if (hoverIndex !== -1) {\n      this.hoverEls.splice(hoverIndex, 1)\n      this.hoverElsIntersections.splice(hoverIndex, 1)\n    }\n    this.gehDragged.forEach(dragged => {\n      this.dispatchMouseEvent(target, 'dragleave', dragged)\n      this.dispatchMouseEvent(dragged, 'dragleave', target)\n    })\n    this.dispatchMouseEvent(target, 'mouseout', this.el)\n  },\n  registerListeners: function () {\n    this.el.addEventListener(this.data.colliderEvent, this.onHit)\n    this.el.addEventListener(this.data.colliderEndEvent, this.unWatch)\n    this.el.addEventListener(this.data.colliderEndEvent, this.unHover)\n\n    // binding order to keep grabEnd from triggering dragover\n    // again before dragDropEnd can delete its carried state\n    this.data.grabStartButtons.forEach(b => {\n      this.el.addEventListener(b, this.onGrabStartButton)\n    })\n    this.data.stretchStartButtons.forEach(b => {\n      this.el.addEventListener(b, this.onStretchStartButton)\n    })\n    this.data.dragDropStartButtons.forEach(b => {\n      this.el.addEventListener(b, this.onDragDropStartButton)\n    })\n    this.data.dragDropEndButtons.forEach(b => {\n      this.el.addEventListener(b, this.onDragDropEndButton)\n    })\n    this.data.stretchEndButtons.forEach(b => {\n      this.el.addEventListener(b, this.onStretchEndButton)\n    })\n    this.data.grabEndButtons.forEach(b => {\n      this.el.addEventListener(b, this.onGrabEndButton)\n    })\n  },\n  unRegisterListeners: function (data) {\n    data = data || this.data\n    if (Object.keys(data).length === 0) {\n      // Empty object passed on initalization\n      return\n    }\n    this.el.removeEventListener(data.colliderEvent, this.onHit)\n    this.el.removeEventListener(data.colliderEndEvent, this.unHover)\n    this.el.removeEventListener(data.colliderEndEvent, this.unWatch)\n\n    data.grabStartButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onGrabStartButton)\n    })\n    data.grabEndButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onGrabEndButton)\n    })\n    data.stretchStartButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onStretchStartButton)\n    })\n    data.stretchEndButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onStretchEndButton)\n    })\n    data.dragDropStartButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onDragDropStartButton)\n    })\n    data.dragDropEndButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onDragDropEndButton)\n    })\n  },\n  emitCancelable: function (target, name, detail) {\n    var data, evt\n    detail = detail || {}\n    data = { bubbles: true, cancelable: true, detail: detail }\n    data.detail.target = data.detail.target || target\n    evt = new window.CustomEvent(name, data)\n    return target.dispatchEvent(evt)\n  },\n  dispatchMouseEvent: function (target, name, relatedTarget) {\n    var mEvt = new window.MouseEvent(name, { relatedTarget: relatedTarget })\n    target.dispatchEvent(mEvt)\n  },\n  dispatchMouseEventAll: function (name, relatedTarget, filterUsed, alsoReverse) {\n    let els = this.hoverEls\n    if (filterUsed) {\n      els = els\n        .filter(el => el !== this.state.get(this.GRAB_EVENT) &&\n                el !== this.state.get(this.DRAG_EVENT) &&\n                el !== this.state.get(this.STRETCH_EVENT) &&\n                !this.gehDragged.has(el))\n    }\n    if (alsoReverse) {\n      for (let i = 0; i < els.length; i++) {\n        this.dispatchMouseEvent(els[i], name, relatedTarget)\n        this.dispatchMouseEvent(relatedTarget, name, els[i])\n      }\n    } else {\n      for (let i = 0; i < els.length; i++) {\n        this.dispatchMouseEvent(els[i], name, relatedTarget)\n      }\n    }\n  },\n  findTarget: function (evType, detail, filterUsed) {\n    var elIndex\n    var eligibleEls = this.hoverEls\n    if (filterUsed) {\n      eligibleEls = eligibleEls\n        .filter(el => el !== this.state.get(this.GRAB_EVENT) &&\n                el !== this.state.get(this.DRAG_EVENT) &&\n                el !== this.state.get(this.STRETCH_EVENT))\n    }\n    for (elIndex = eligibleEls.length - 1; elIndex >= 0; elIndex--) {\n      if (!this.emitCancelable(eligibleEls[elIndex], evType, detail)) {\n        return eligibleEls[elIndex]\n      }\n    }\n    return null\n  },\n  // Helper to ensure dropping and regrabbing finds the same target for\n  // for order-sorted hoverEls (grabbing; no-op for distance-sorted (pointing)\n  promoteHoveredEl: function (el) {\n    var hoverIndex = this.hoverEls.indexOf(el)\n    if (hoverIndex !== -1 &&\n        this.hoverElsIntersections[hoverIndex].distance == null) {\n      this.hoverEls.splice(hoverIndex, 1)\n      const sect = this.hoverElsIntersections.splice(hoverIndex, 1)\n      this.hoverEls.push(el)\n      this.hoverElsIntersections.push(sect[0])\n    }\n  }\n})\n","/* global AFRAME */\nconst buttonCore = require('./prototypes/buttons-proto.js')\nAFRAME.registerComponent('clickable', AFRAME.utils.extendDeep({}, buttonCore, {\n  schema: {\n    onclick: { type: 'string' }\n  },\n  init: function () {\n    this.CLICKED_STATE = 'clicked'\n    this.CLICK_EVENT = 'grab-start'\n    this.UNCLICK_EVENT = 'grab-end'\n    this.clickers = []\n\n    this.start = this.start.bind(this)\n    this.end = this.end.bind(this)\n    this.el.addEventListener(this.CLICK_EVENT, this.start)\n    this.el.addEventListener(this.UNCLICK_EVENT, this.end)\n  },\n  remove: function () {\n    this.el.removeEventListener(this.CLICK_EVENT, this.start)\n    this.el.removeEventListener(this.UNCLICK_EVENT, this.end)\n  },\n  start: function (evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) { return }\n    this.el.addState(this.CLICKED_STATE)\n    if (this.clickers.indexOf(evt.detail.hand) === -1) {\n      this.clickers.push(evt.detail.hand)\n      if (evt.preventDefault) { evt.preventDefault() }\n    }\n  },\n  end: function (evt) {\n    const handIndex = this.clickers.indexOf(evt.detail.hand)\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) { return }\n    if (handIndex !== -1) {\n      this.clickers.splice(handIndex, 1)\n    }\n    if (this.clickers.length < 1) {\n      this.el.removeState(this.CLICKED_STATE)\n    }\n    if (evt.preventDefault) { evt.preventDefault() }\n  }\n}))\n","/* global AFRAME */\nconst inherit = AFRAME.utils.extendDeep\nconst buttonCore = require('./prototypes/buttons-proto.js')\n\nAFRAME.registerComponent('drag-droppable', inherit({}, buttonCore, {\n  init: function () {\n    console.warn('Warning: drag-droppable is deprecated. Use draggable and droppable components instead')\n    this.HOVERED_STATE = 'dragover'\n    this.DRAGGED_STATE = 'dragged'\n    this.HOVER_EVENT = 'dragover-start'\n    this.UNHOVER_EVENT = 'dragover-end'\n    this.DRAG_EVENT = 'drag-start'\n    this.UNDRAG_EVENT = 'drag-end'\n    this.DRAGDROP_EVENT = 'drag-drop'\n\n    this.hoverStart = this.hoverStart.bind(this)\n    this.dragStart = this.dragStart.bind(this)\n    this.hoverEnd = this.hoverEnd.bind(this)\n    this.dragEnd = this.dragEnd.bind(this)\n    this.dragDrop = this.dragDrop.bind(this)\n\n    this.el.addEventListener(this.HOVER_EVENT, this.hoverStart)\n    this.el.addEventListener(this.DRAG_EVENT, this.dragStart)\n    this.el.addEventListener(this.UNHOVER_EVENT, this.hoverEnd)\n    this.el.addEventListener(this.UNDRAG_EVENT, this.dragEnd)\n    this.el.addEventListener(this.DRAGDROP_EVENT, this.dragDrop)\n  },\n  remove: function () {\n    this.el.removeEventListener(this.HOVER_EVENT, this.hoverStart)\n    this.el.removeEventListener(this.DRAG_EVENT, this.dragStart)\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.hoverEnd)\n    this.el.removeEventListener(this.UNDRAG_EVENT, this.dragEnd)\n    this.el.removeEventListener(this.DRAGDROP_EVENT, this.dragDrop)\n  },\n  hoverStart: function (evt) {\n    this.el.addState(this.HOVERED_STATE)\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  dragStart: function (evt) {\n    if (!this.startButtonOk(evt)) { return }\n    this.el.addState(this.DRAGGED_STATE)\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  hoverEnd: function (evt) {\n    this.el.removeState(this.HOVERED_STATE)\n  },\n  dragEnd: function (evt) {\n    if (!this.endButtonOk(evt)) { return }\n    this.el.removeState(this.DRAGGED_STATE)\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  dragDrop: function (evt) {\n    if (!this.endButtonOk(evt)) { return }\n    if (evt.preventDefault) { evt.preventDefault() }\n  }\n}))\n","/* global AFRAME */\nconst inherit = AFRAME.utils.extendDeep\nconst buttonCore = require('./prototypes/buttons-proto.js')\n\nAFRAME.registerComponent('draggable', inherit({}, buttonCore, {\n  init: function () {\n    this.DRAGGED_STATE = 'dragged'\n    this.DRAG_EVENT = 'drag-start'\n    this.UNDRAG_EVENT = 'drag-end'\n\n    this.dragStartBound = this.dragStart.bind(this)\n    this.dragEndBound = this.dragEnd.bind(this)\n\n    this.el.addEventListener(this.DRAG_EVENT, this.dragStartBound)\n    this.el.addEventListener(this.UNDRAG_EVENT, this.dragEndBound)\n  },\n  remove: function () {\n    this.el.removeEventListener(this.DRAG_EVENT, this.dragStart)\n    this.el.removeEventListener(this.UNDRAG_EVENT, this.dragEnd)\n  },\n  dragStart: function (evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) { return }\n    this.el.addState(this.DRAGGED_STATE)\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  dragEnd: function (evt) {\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) { return }\n    this.el.removeState(this.DRAGGED_STATE)\n    if (evt.preventDefault) { evt.preventDefault() }\n  }\n}))\n","/* global AFRAME */\nfunction elementMatches (el, selector) {\n  if (el.matches) { return el.matches(selector) }\n  if (el.msMatchesSelector) { return el.msMatchesSelector(selector) }\n  if (el.webkitMatchesSelector) { return el.webkitMatchesSelector(selector) }\n}\nAFRAME.registerComponent('droppable', {\n  schema: {\n    accepts: {default: ''},\n    autoUpdate: {default: true},\n    acceptEvent: {default: ''},\n    rejectEvent: {default: ''}\n  },\n  multiple: true,\n  init: function () {\n    this.HOVERED_STATE = 'dragover'\n    this.HOVER_EVENT = 'dragover-start'\n    this.UNHOVER_EVENT = 'dragover-end'\n    this.DRAGDROP_EVENT = 'drag-drop'\n\n    // better for Sinon spying if original method not overwritten\n    this.hoverStartBound = this.hoverStart.bind(this)\n    this.hoverEndBound = this.hoverEnd.bind(this)\n    this.dragDropBound = this.dragDrop.bind(this)\n    this.mutateAcceptsBound = this.mutateAccepts.bind(this)\n\n    this.acceptableEntities = []\n    this.observer = new window.MutationObserver(this.mutateAcceptsBound)\n    this.observerOpts = {childList: true, subtree: true}\n\n    this.el.addEventListener(this.HOVER_EVENT, this.hoverStartBound)\n    this.el.addEventListener(this.UNHOVER_EVENT, this.hoverEndBound)\n    this.el.addEventListener(this.DRAGDROP_EVENT, this.dragDropBound)\n  },\n  update: function () {\n    if (this.data.accepts.length) {\n      this.acceptableEntities = Array.prototype.slice.call(\n        this.el.sceneEl.querySelectorAll(this.data.accepts)\n      )\n    } else {\n      this.acceptableEntities = null\n    }\n    if (this.data.autoUpdate && this.acceptableEntities != null) {\n      this.observer.observe(this.el.sceneEl, this.observerOpts)\n    } else {\n      this.observer.disconnect()\n    }\n  },\n  remove: function () {\n    this.el.removeEventListener(this.HOVER_EVENT, this.hoverStartBound)\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.hoverEndBound)\n    this.el.removeEventListener(this.DRAGDROP_EVENT, this.dragDropBound)\n    this.observer.disconnect()\n  },\n  mutateAccepts: function (mutations) {\n    const query = this.data.accepts\n    mutations.forEach(mutation => {\n      mutation.addedNodes.forEach(added => {\n        if (elementMatches(added, query)) {\n          this.acceptableEntities.push(added)\n        }\n      })\n    })\n  },\n  entityAcceptable: function (entity) {\n    const acceptableEntities = this.acceptableEntities\n    if (acceptableEntities == null) { return true }\n    for (let item of acceptableEntities) {\n      if (item === entity) {\n        return true\n      }\n    }\n    return false\n  },\n  hoverStart: function (evt) {\n    if (evt.defaultPrevented || !this.entityAcceptable(evt.detail.carried)) {\n      return\n    }\n    this.el.addState(this.HOVERED_STATE)\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  hoverEnd: function (evt) {\n    if (evt.defaultPrevented) { return }\n    this.el.removeState(this.HOVERED_STATE)\n  },\n  dragDrop: function (evt) {\n    if (evt.defaultPrevented) { return }\n    const dropped = evt.detail.dropped\n    if (!this.entityAcceptable(dropped)) {\n      if (this.data.rejectEvent.length) {\n        this.el.emit(this.data.rejectEvent, {el: dropped})\n      }\n      return\n    }\n    if (this.data.acceptEvent.length) {\n      this.el.emit(this.data.acceptEvent, {el: dropped})\n    }\n    if (evt.preventDefault) { evt.preventDefault() }\n  }\n})\n","/* global AFRAME, THREE */\nconst inherit = AFRAME.utils.extendDeep\nconst physicsCore = require('./prototypes/physics-grab-proto.js')\nconst buttonsCore = require('./prototypes/buttons-proto.js')\n// new object with all core modules\nconst base = inherit({}, physicsCore, buttonsCore)\nAFRAME.registerComponent('grabbable', inherit(base, {\n  schema: {\n    maxGrabbers: {type: 'int', default: NaN},\n    invert: {default: false},\n    suppressY: {default: false}\n  },\n  init: function () {\n    this.GRABBED_STATE = 'grabbed'\n    this.GRAB_EVENT = 'grab-start'\n    this.UNGRAB_EVENT = 'grab-end'\n    this.grabbed = false\n    this.grabbers = []\n    this.constraints = new Map()\n    this.deltaPositionIsValid = false\n    this.grabDistance = undefined\n    this.grabDirection = {x: 0, y: 0, z: -1}\n    this.grabOffset = {x: 0, y: 0, z: 0}\n    // persistent object speeds up repeat setAttribute calls\n    this.destPosition = {x: 0, y: 0, z: 0}\n    this.deltaPosition = new THREE.Vector3()\n    this.targetPosition = new THREE.Vector3()\n    this.physicsInit()\n\n    this.el.addEventListener(this.GRAB_EVENT, e => this.start(e))\n    this.el.addEventListener(this.UNGRAB_EVENT, e => this.end(e))\n    this.el.addEventListener('mouseout', e => this.lostGrabber(e))\n  },\n  update: function () {\n    this.physicsUpdate()\n    this.xFactor = (this.data.invert) ? -1 : 1\n    this.zFactor = (this.data.invert) ? -1 : 1\n    this.yFactor = ((this.data.invert) ? -1 : 1) * !this.data.suppressY\n  },\n  tick: (function () {\n    var q = new THREE.Quaternion()\n    var v = new THREE.Vector3()\n\n    return function () {\n      var entityPosition\n      if (this.grabber) {\n        // reflect on z-axis to point in same direction as the laser\n        this.targetPosition.copy(this.grabDirection)\n        this.targetPosition\n            .applyQuaternion(this.grabber.object3D.getWorldQuaternion(q))\n            .setLength(this.grabDistance)\n            .add(this.grabber.object3D.getWorldPosition(v))\n            .add(this.grabOffset)\n        if (this.deltaPositionIsValid) {\n          // relative position changes work better with nested entities\n          this.deltaPosition.sub(this.targetPosition)\n          entityPosition = this.el.getAttribute('position')\n          this.destPosition.x =\n              entityPosition.x - this.deltaPosition.x * this.xFactor\n          this.destPosition.y =\n              entityPosition.y - this.deltaPosition.y * this.yFactor\n          this.destPosition.z =\n              entityPosition.z - this.deltaPosition.z * this.zFactor\n          this.el.setAttribute('position', this.destPosition)\n        } else {\n          this.deltaPositionIsValid = true\n        }\n        this.deltaPosition.copy(this.targetPosition)\n      }\n    }\n  })(),\n  remove: function () {\n    this.el.removeEventListener(this.GRAB_EVENT, this.start)\n    this.el.removeEventListener(this.UNGRAB_EVENT, this.end)\n    this.physicsRemove()\n  },\n  start: function (evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) {\n      return\n    }\n    // room for more grabbers?\n    const grabAvailable = !Number.isFinite(this.data.maxGrabbers) ||\n        this.grabbers.length < this.data.maxGrabbers\n\n    if (this.grabbers.indexOf(evt.detail.hand) === -1 && grabAvailable) {\n      if (!evt.detail.hand.object3D) {\n        console.warn('grabbable entities must have an object3D')\n        return\n      }\n      this.grabbers.push(evt.detail.hand)\n      // initiate physics if available, otherwise manual\n      if (!this.physicsStart(evt) && !this.grabber) {\n        this.grabber = evt.detail.hand\n        this.resetGrabber()\n      }\n      // notify super-hands that the gesture was accepted\n      if (evt.preventDefault) { evt.preventDefault() }\n      this.grabbed = true\n      this.el.addState(this.GRABBED_STATE)\n    }\n  },\n  end: function (evt) {\n    const handIndex = this.grabbers.indexOf(evt.detail.hand)\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) { return }\n    if (handIndex !== -1) {\n      this.grabbers.splice(handIndex, 1)\n      this.grabber = this.grabbers[0]\n    }\n    this.physicsEnd(evt)\n    if (!this.resetGrabber()) {\n      this.grabbed = false\n      this.el.removeState(this.GRABBED_STATE)\n    }\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  resetGrabber: (function () {\n    var objPos = new THREE.Vector3()\n    var grabPos = new THREE.Vector3()\n    return function () {\n      let raycaster\n      if (!this.grabber) {\n        return false\n      }\n      raycaster = this.grabber.getAttribute('raycaster')\n      this.deltaPositionIsValid = false\n      this.grabDistance = this.el.object3D.getWorldPosition(objPos).distanceTo(this.grabber.object3D.getWorldPosition(grabPos))\n      if (raycaster) {\n        this.grabDirection = raycaster.direction\n        this.grabOffset = raycaster.origin\n      }\n      return true\n    }\n  })(),\n  lostGrabber: function (evt) {\n    let i = this.grabbers.indexOf(evt.relatedTarget)\n    // if a queued, non-physics grabber leaves the collision zone, forget it\n    if (i !== -1 && evt.relatedTarget !== this.grabber &&\n        !this.physicsIsConstrained(evt.relatedTarget)) {\n      this.grabbers.splice(i, 1)\n    }\n  }\n}))\n","/* global AFRAME */\nAFRAME.registerComponent('hoverable', {\n  init: function () {\n    this.HOVERED_STATE = 'hovered'\n    this.HOVER_EVENT = 'hover-start'\n    this.UNHOVER_EVENT = 'hover-end'\n\n    this.hoverers = []\n\n    this.start = this.start.bind(this)\n    this.end = this.end.bind(this)\n\n    this.el.addEventListener(this.HOVER_EVENT, this.start)\n    this.el.addEventListener(this.UNHOVER_EVENT, this.end)\n  },\n  remove: function () {\n    this.el.removeEventListener(this.HOVER_EVENT, this.start)\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.end)\n  },\n  start: function (evt) {\n    if (evt.defaultPrevented) { return }\n    this.el.addState(this.HOVERED_STATE)\n    if (this.hoverers.indexOf(evt.detail.hand) === -1) {\n      this.hoverers.push(evt.detail.hand)\n    }\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  end: function (evt) {\n    if (evt.defaultPrevented) { return }\n    var handIndex = this.hoverers.indexOf(evt.detail.hand)\n    if (handIndex !== -1) {\n      this.hoverers.splice(handIndex, 1)\n    }\n    if (this.hoverers.length < 1) {\n      this.el.removeState(this.HOVERED_STATE)\n    }\n  }\n})\n","// common code used in customizing reaction components by button\nmodule.exports = (function () {\n  function buttonIsValid (evt, buttonList) {\n    return buttonList.length === 0 ||\n        buttonList.indexOf(evt.detail.buttonEvent.type) !== -1\n  }\n  return {\n    schema: {\n      startButtons: {default: []},\n      endButtons: {default: []}\n    },\n    startButtonOk: function (evt) {\n      return buttonIsValid(evt, this.data['startButtons'])\n    },\n    endButtonOk: function (evt) {\n      return buttonIsValid(evt, this.data['endButtons'])\n    }\n  }\n})()\n","// base code used by grabbable for physics interactions\nmodule.exports = {\n  schema: {\n    usePhysics: {default: 'ifavailable'}\n  },\n  physicsInit: function () {\n    this.constraints = new Map()\n  },\n  physicsUpdate: function () {\n    if (this.data.usePhysics === 'never' && this.constraints.size) {\n      this.physicsClear()\n    }\n  },\n  physicsRemove: function () {\n    this.physicsClear()\n  },\n  physicsStart: function (evt) {\n    // initiate physics constraint if available and not already existing\n    if (this.data.usePhysics !== 'never' && this.el.body &&\n        evt.detail.hand.body && !this.constraints.has(evt.detail.hand)) {\n      const newConId = Math.random().toString(36).substr(2, 9)\n      this.el.setAttribute('constraint__' + newConId, {\n        target: evt.detail.hand\n      })\n      this.constraints.set(evt.detail.hand, newConId)\n      return true\n    }\n    // Prevent manual grab by returning true\n    if (this.data.usePhysics === 'only') { return true }\n    return false\n  },\n  physicsEnd: function (evt) {\n    let constraintId = this.constraints.get(evt.detail.hand)\n    if (constraintId) {\n      this.el.removeAttribute('constraint__' + constraintId)\n      this.constraints.delete(evt.detail.hand)\n    }\n  },\n  physicsClear: function () {\n    if (this.el.body) {\n      for (let c of this.constraints.values()) {\n        this.el.body.world.removeConstraint(c)\n      }\n    }\n    this.constraints.clear()\n  },\n  physicsIsConstrained: function (el) {\n    return this.constraints.has(el)\n  },\n  physicsIsGrabbing () {\n    return this.constraints.size > 0\n  }\n}\n","/* global AFRAME, THREE */\nconst inherit = AFRAME.utils.extendDeep\nconst buttonsCore = require('./prototypes/buttons-proto.js')\n// new object with all core modules\nconst base = inherit({}, buttonsCore)\nAFRAME.registerComponent('stretchable', inherit(base, {\n  schema: {\n    usePhysics: {default: 'ifavailable'},\n    invert: {default: false},\n    physicsUpdateRate: {default: 100}\n  },\n  init: function () {\n    this.STRETCHED_STATE = 'stretched'\n    this.STRETCH_EVENT = 'stretch-start'\n    this.UNSTRETCH_EVENT = 'stretch-end'\n    this.stretched = false\n    this.stretchers = []\n\n    this.scale = new THREE.Vector3()\n    this.handPos = new THREE.Vector3()\n    this.otherHandPos = new THREE.Vector3()\n\n    this.start = this.start.bind(this)\n    this.end = this.end.bind(this)\n\n    this.el.addEventListener(this.STRETCH_EVENT, this.start)\n    this.el.addEventListener(this.UNSTRETCH_EVENT, this.end)\n  },\n  update: function (oldDat) {\n    this.updateBodies = AFRAME.utils.throttleTick(\n      this._updateBodies,\n      this.data.physicsUpdateRate,\n      this\n    )\n  },\n  tick: function (time, timeDelta) {\n    if (!this.stretched) { return }\n    this.scale.copy(this.el.getAttribute('scale'))\n    this.stretchers[0].object3D.getWorldPosition(this.handPos)\n    this.stretchers[1].object3D.getWorldPosition(this.otherHandPos)\n    const currentStretch = this.handPos.distanceTo(this.otherHandPos)\n    let deltaStretch = 1\n    if (this.previousStretch !== null && currentStretch !== 0) {\n      deltaStretch = Math.pow(\n          currentStretch / this.previousStretch,\n          (this.data.invert)\n            ? -1\n            : 1\n      )\n    }\n    this.previousStretch = currentStretch\n    if (this.previousPhysicsStretch == null) {\n      // establish correct baseline even if throttled function isn't called\n      this.previousPhysicsStretch = currentStretch\n    }\n    this.scale.multiplyScalar(deltaStretch)\n    this.el.setAttribute('scale', this.scale)\n    // scale update for all nested physics bodies (throttled)\n    this.updateBodies(time, timeDelta)\n  },\n  remove: function () {\n    this.el.removeEventListener(this.STRETCH_EVENT, this.start)\n    this.el.removeEventListener(this.UNSTRETCH_EVENT, this.end)\n  },\n  start: function (evt) {\n    if (this.stretched || this.stretchers.includes(evt.detail.hand) ||\n        !this.startButtonOk(evt) || evt.defaultPrevented) {\n      return\n    } // already stretched or already captured this hand or wrong button\n    this.stretchers.push(evt.detail.hand)\n    if (this.stretchers.length === 2) {\n      this.stretched = true\n      this.previousStretch = null\n      this.previousPhysicsStretch = null\n      this.el.addState(this.STRETCHED_STATE)\n    }\n    if (evt.preventDefault) { evt.preventDefault() } // gesture accepted\n  },\n  end: function (evt) {\n    var stretcherIndex = this.stretchers.indexOf(evt.detail.hand)\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) { return }\n    if (stretcherIndex !== -1) {\n      this.stretchers.splice(stretcherIndex, 1)\n      this.stretched = false\n      this.el.removeState(this.STRETCHED_STATE)\n      // override throttle to push last stretch to physics bodies\n      this._updateBodies()\n    }\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  _updateBodies: function () {\n    if (!this.el.body || this.data.usePhysics === 'never') { return }\n    const currentStretch = this.previousStretch // last visible geometry stretch\n    let deltaStretch = 1\n    if (this.previousPhysicsStretch !== null && currentStretch > 0) {\n      deltaStretch = Math.pow(\n          currentStretch / this.previousPhysicsStretch,\n          (this.data.invert)\n            ? -1\n            : 1\n      )\n    }\n    this.previousPhysicsStretch = currentStretch\n    if (deltaStretch === 1) { return }\n    for (let c of this.el.childNodes) { this.stretchBody(c, deltaStretch) }\n    this.stretchBody(this.el, deltaStretch)\n  },\n  stretchBody: function (el, deltaStretch) {\n    if (!el.body) { return }\n    let physicsShape\n    let offset\n    for (let i = 0; i < el.body.shapes.length; i++) {\n      physicsShape = el.body.shapes[i]\n      if (physicsShape.halfExtents) {\n        physicsShape.halfExtents\n            .scale(deltaStretch, physicsShape.halfExtents)\n        physicsShape.updateConvexPolyhedronRepresentation()\n      } else if (physicsShape.radius) {\n        physicsShape.radius *= deltaStretch\n        physicsShape.updateBoundingSphereRadius()\n      } else if (!this.shapeWarned) {\n        console.warn('Unable to stretch physics body: unsupported shape')\n        this.shapeWarned = true\n      }\n      // also move offset to match scale change\n      offset = el.body.shapeOffsets[i]\n      offset.scale(deltaStretch, offset)\n    }\n    el.body.updateBoundingRadius()\n  }\n}))\n","/* global AFRAME */\nAFRAME.registerSystem('super-hands', {\n  init: function () {\n    this.superHands = []\n  },\n  registerMe: function (comp) {\n    // when second hand registers, store links\n    if (this.superHands.length === 1) {\n      this.superHands[0].otherSuperHand = comp\n      comp.otherSuperHand = this.superHands[0]\n    }\n    this.superHands.push(comp)\n  },\n  unregisterMe: function (comp) {\n    var index = this.superHands.indexOf(comp)\n    if (index !== -1) {\n      this.superHands.splice(index, 1)\n    }\n    this.superHands.forEach(x => {\n      if (x.otherSuperHand === comp) { x.otherSuperHand = null }\n    })\n  }\n})\n","import AssetManager from \"./assetManager\";\r\nimport \"./components/renderer\";\r\n\r\nexport default class AframeContext {\r\n    constructor(settings) {\r\n        this.inVR = false;\r\n        // settings pointer\r\n        this.settings = settings;\r\n        this.createScene();\r\n        // create asset manager\r\n        this.assetManager = new AssetManager(this.scene);\r\n    }\r\n\r\n    createScene() {\r\n        // find scene if exists else create scene\r\n        const scene = document.getElementsByTagName(\"a-scene\");\r\n        if (scene.length > 0)\r\n            this.scene = scene[0];\r\n        else {\r\n            this.scene = document.createElement(\"a-scene\");\r\n            document.body.appendChild(this.scene);\r\n            this.newScene = true;\r\n        }\r\n\r\n        // add stats to scene if debug\r\n        if (this.settings.debug)\r\n            this.scene.setAttribute(\"stats\", \"\")\r\n\r\n        //custom renderer params like local clipping\r\n        this.scene.setAttribute(\"vr-renderer\", \"\");\r\n\r\n        // check if in VR\r\n        this.scene.addEventListener(\"enter-vr\", (() => {\r\n            this.inVR = true;\r\n        }).bind(this));\r\n        this.scene.addEventListener(\"exit-vr\", (() => {\r\n            this.inVR = false;\r\n        }).bind(this));\r\n    }\r\n\r\n    createContainer(web2vr) {\r\n        // conttainer for all aframe elements\r\n        this.container = document.createElement(\"a-entity\");\r\n        this.container.classList.add(\"vr-container\");\r\n        this.container.classList.add(this.settings.interactiveTag);\r\n\r\n        // position container\r\n        const width = parseFloat(window.getComputedStyle(web2vr.container).width) * (1 / this.settings.scale);\r\n        let x = this.settings.position.x;\r\n        // if x=0 then then we want to be in center for testing and showcase\r\n        if (x == 0)\r\n            x = x - width / 2;\r\n        this.container.object3D.position.set(x, this.settings.position.y, this.settings.position.z);\r\n        // update rotation from aframe(1.0.4) because there is bug(rotation x will be wrong) if you update with three.js\r\n        this.container.setAttribute(\"rotation\", { x: this.settings.rotation.x, y: this.settings.rotation.y, z: this.settings.rotation.z });\r\n\r\n        const parentElement = document.querySelector(this.settings.parentSelector);\r\n        if (parentElement)\r\n            parentElement.appendChild(this.container);\r\n        else {\r\n            this.container.setAttribute(\"vr-grab-rotate-static\", \"\");\r\n            this.container.setAttribute(\"grabbable\", \"\");\r\n            this.container.setAttribute(\"stretchable\", \"\");\r\n            this.scene.appendChild(this.container);\r\n        }\r\n\r\n        // pointer for grabRotateStatic\r\n        this.container.web2vr = web2vr;\r\n    }\r\n\r\n    createSky() {\r\n        // create sky if sky doesnt exist\r\n        if (document.getElementsByTagName(\"a-sky\").length == 0 && this.settings.skybox) {\r\n            this.sky = document.createElement(\"a-sky\");\r\n            this.sky.setAttribute(\"color\", \"#a9f8fe\");\r\n            this.scene.appendChild(this.sky);\r\n        }\r\n    }\r\n\r\n    createControllers() {\r\n        // cursor only for dev testing on desktop\r\n        if (!document.getElementById(\"mouseCursor\")) {\r\n            const cursor = document.createElement(\"a-entity\");\r\n            cursor.id = \"mouseCursor\";\r\n            cursor.setAttribute(\"cursor\", \"rayOrigin\", \"mouse\");\r\n            cursor.setAttribute(\"raycaster\", `objects: .${this.settings.interactiveTag}, .collidable`);\r\n            this.scene.appendChild(cursor);\r\n        }\r\n\r\n        // super hands 6DOF\r\n        if (this.settings.createControllers && !document.getElementById(\"leftHand\")) {\r\n            const raycaster = `objects: .${this.settings.interactiveTag}, .collidable; far: ${this.settings.raycasterFar}`;\r\n            const superhands = \"colliderEvent: raycaster-intersection; colliderEventProperty: els; colliderEndEvent:raycaster-intersection-cleared; colliderEndEventProperty: clearedEls; grabStartButtons: gripdown; grabEndButtons: gripup; stretchStartButtons: gripdown; stretchEndButtons: gripup\";\r\n\r\n            const leftHand = document.createElement(\"a-entity\");\r\n            leftHand.id = \"leftHand\";\r\n            leftHand.setAttribute(\"hand-controls\", \"hand:left; handModelStyle: highPoly; color: #ffcccc\");\r\n            leftHand.setAttribute(\"laser-controls\", \"\");\r\n            leftHand.setAttribute(\"raycaster\", raycaster);\r\n            leftHand.setAttribute(\"super-hands\", superhands);\r\n\r\n            const rightHand = document.createElement(\"a-entity\");\r\n            rightHand.id = \"rightHand\";\r\n            rightHand.setAttribute(\"hand-controls\", \"hand:right; handModelStyle: highPoly; color: #ffcccc\");\r\n            rightHand.setAttribute(\"laser-controls\", \"\");\r\n            rightHand.setAttribute(\"raycaster\", raycaster);\r\n            rightHand.setAttribute(\"super-hands\", superhands);\r\n\r\n            this.scene.appendChild(leftHand);\r\n            this.scene.appendChild(rightHand);\r\n        }\r\n        // keyboard\r\n        this.keyboard = document.getElementById(\"vr-keyboard\");\r\n        if (!this.keyboard) {\r\n            this.keyboard = document.createElement(\"a-entity\");\r\n            this.keyboard.id = \"vr-keyboard\";\r\n            this.keyboard.setAttribute(\"a-keyboard\", \"\");\r\n            this.keyboard.setAttribute(\"grabbable\", \"\");\r\n            this.scene.appendChild(this.keyboard);\r\n            this.keyboard.object3D.visible = false;\r\n\r\n            // current active input\r\n            this.keyboard.activeInput = null;\r\n            // event listener for the keyboard key press \r\n            document.addEventListener('a-keyboard-update', (e) => {\r\n                if (this.keyboard.activeInput) {\r\n                    const code = parseInt(e.detail.code);\r\n                    let value = this.keyboard.activeInput.value;\r\n\r\n                    // backspace\r\n                    if (code == 8)\r\n                        value = value.slice(0, -1);\r\n                    // submit or cancel\r\n                    else if (code == 6 || code == 24) {\r\n                        this.keyboard.object3D.visible = false;\r\n                        this.keyboard.object3D.position.y = 10000; // because raycasting still collides with invisible objects\r\n                        this.keyboard.activeInput.element.active = false;\r\n                        this.keyboard.activeInput.element.update();\r\n                        this.keyboard.activeInput = null;\r\n                        return;\r\n                    }\r\n                    // ignore arrow keys\r\n                    else if (![37, 38, 39, 40].includes(code))\r\n                        value += e.detail.value;\r\n\r\n                    this.keyboard.activeInput.value = value;\r\n                    this.keyboard.activeInput.element.update();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}","export default class AssetManager {\r\n    constructor(scene) {\r\n        const assets = document.getElementsByTagName(\"a-assets\")[0];\r\n        if (assets)\r\n            this.assets = assets;\r\n        else {\r\n            this.assets = document.createElement(\"a-assets\");\r\n            scene.appendChild(this.assets);\r\n        }\r\n    }\r\n\r\n    // update current-id attribute\r\n    updateCurrentAssetId() {\r\n        let currentAssetId = parseInt(this.assets.getAttribute(\"current-id\"));\r\n        if (!this.assets.getAttribute(\"current-id\")) {\r\n            this.assets.setAttribute(\"current-id\", 0);\r\n            currentAssetId = 0;\r\n        }\r\n        this.assets.setAttribute(\"current-id\", currentAssetId + 1);\r\n    }\r\n    // update current-id attribute and return it.\r\n    // used for elements (ex. video) outside a-assets tag\r\n    updateCurrentAssetIdReturn(){\r\n        this.updateCurrentAssetId();\r\n        return \"asset-\"+this.assets.getAttribute(\"current-id\");\r\n    }\r\n\r\n    // find asset if exists if not create and return it\r\n    getAsset(path, type) {\r\n        const assets = this.assets.getChildren();\r\n\r\n        for (const asset of assets) {\r\n            if (asset.getAttribute(\"src\") === path)\r\n                return asset.getAttribute(\"id\");\r\n        }\r\n\r\n        return this.createAsset(path, type);\r\n    }\r\n\r\n    createAsset(path, type) {\r\n        const asset = document.createElement(type);\r\n        asset.setAttribute(\"src\", path);\r\n        this.updateCurrentAssetId();\r\n        const id = \"asset-\" + this.assets.getAttribute(\"current-id\");\r\n        asset.setAttribute(\"id\", id);\r\n        // have to manualy add crossorigin for all external assets to load\r\n        asset.setAttribute(\"crossorigin\", \"Anonymous\");\r\n\r\n        this.assets.appendChild(asset);\r\n        return id;\r\n    }\r\n\r\n    removeAsset(id) {\r\n        this.assets.querySelector(\"#\" + id).remove();\r\n    }\r\n}","AFRAME.registerComponent(\"vr-animate\", {\r\n    init: function () {\r\n        this.running = false;\r\n        // listenes for css animation and translation\r\n        this.el.element.domElement.addEventListener(\"animationstart\", this.startAnimation.bind(this));\r\n        this.el.element.domElement.addEventListener(\"animationend\", this.stopAnimation.bind(this));\r\n        this.el.element.domElement.addEventListener(\"transitionstart\", this.startAnimation.bind(this));\r\n        this.el.element.domElement.addEventListener(\"transitionend\", this.stopAnimation.bind(this));\r\n    },\r\n    tick: function () {\r\n        if (this.running)\r\n            this.el.element.web2vr.update();\r\n    },\r\n    startAnimation: function () {\r\n        this.running = true;\r\n    },\r\n    stopAnimation: function () {\r\n        this.running = false;\r\n        // one final update\r\n        this.el.element.web2vr.update();\r\n    }\r\n});","AFRAME.registerComponent(\"vr-border\", {\r\n    schema: {\r\n        width: { type: \"number\" },\r\n        color: { type: \"string\" },\r\n    },\r\n    init: function () {\r\n        this.running = true;\r\n        const plane = this.el.object3D.children[0];\r\n        const edges = new THREE.EdgesGeometry(plane.geometry);\r\n        const line = new THREE.LineSegments(edges, new THREE.LineBasicMaterial({ color: 0x000000, linewidth: this.data.width }));\r\n\r\n        this.borderObject = line;\r\n        this.el.element.web2vr.aframe.container.object3D.add(this.borderObject);\r\n\r\n        //maybe clippingContext inside tick?\r\n        if (this.el.element.clippingContext) {\r\n            line.material.clippingPlanes = this.el.element.clippingContext.planes;\r\n            line.material.needsUpdate = true;\r\n        }\r\n    },\r\n    update: function () {\r\n        // waiting for three.js(WebGL) to add lineWidth support for Windows(DirectX) browsers for now linewidth is 1 no matter what you set it.\r\n        // lineWidth works for other OS.\r\n        const borderWidth = this.data.width;\r\n\r\n        // custom element border width\r\n        if (this.el.element.borderWidth)\r\n            this.borderObject.material.linewidth = this.el.element.borderWidth;\r\n        else\r\n            this.borderObject.material.linewidth = borderWidth;\r\n\r\n        // custom element border color\r\n        if (this.el.element.borderColor)\r\n            this.borderObject.material.color = this.el.element.borderColor;\r\n        else\r\n            this.borderObject.material.color = new THREE.Color(this.data.color);\r\n    },\r\n    updateBorder: function () {\r\n        if (this.el.element.visible) {\r\n            this.running = true;\r\n            this.borderObject.material.visible = true;\r\n        }\r\n        else\r\n            this.borderObject.material.visible = false;\r\n    },\r\n    tick: function () {\r\n        if (this.running) {\r\n            const scale = this.el.object3D.scale;\r\n            const plane = this.el.object3D.children[0].geometry.clone();\r\n            plane.scale(scale.x, scale.y, scale.z);\r\n            const edges = new THREE.EdgesGeometry(plane);\r\n            const position = this.el.object3D.position;\r\n\r\n            this.borderObject.geometry = edges;\r\n\r\n            this.borderObject.position.set(position.x, position.y, position.z + this.el.element.web2vr.settings.layerStep * 2);\r\n            this.running = false;\r\n        }\r\n    },\r\n    remove: function () {\r\n        this.el.element.web2vr.aframe.container.object3D.remove(this.borderObject);\r\n    }\r\n});","AFRAME.registerComponent(\"vr-grab-rotate-static\", {\r\n    tick: function () {\r\n        if (this.el.components[\"grabbable\"].grabbed) {\r\n            // update clipping when moving\r\n            if (this.el.web2vr.scroll.hasScroll) {\r\n                for (const element of this.el.web2vr.elements)\r\n                    element.updateClipping();\r\n            }\r\n\r\n            const obj = this.el.object3D;\r\n            const hand = this.el.components[\"grabbable\"].grabbers[0].object3D;\r\n\r\n            obj.rotation.y = Math.atan2(hand.position.x - (obj.position.x + this.el.children[0].getAttribute(\"width\") / 2), hand.position.z - obj.position.z);\r\n\r\n            //obj.rotation.x = hand.rotation.x;\r\n            //obj.rotation.y = hand.rotation.y;\r\n            //obj.rotation.z = hand.rotation.z;\r\n        }\r\n    },\r\n});","AFRAME.registerComponent(\"vr-renderer\", {\r\n    init: function () {\r\n        this.el.sceneEl.renderer.localClippingEnabled = true;\r\n    }\r\n});","AFRAME.registerComponent(\"vr-scrollbar\", {\r\n    init: function () {\r\n        this.el.addEventListener(\"click\", (function (evt) {\r\n            let scrollHeight = parseFloat(this.el.web2vr.aframe.container.firstElementChild.element.style.height) - this.el.web2vr.settings.scrollWindowHeight;\r\n            if (this.el.web2vr.scroll.scrollContainer == this.el.web2vr.container)\r\n                scrollHeight = this.el.web2vr.scroll.scrollContainer.scrollHeight - this.el.web2vr.scroll.scrollContainer.clientHeight;\r\n\r\n            const scrollY = (1 - evt.detail.intersection.uv.y) * (scrollHeight) / this.el.web2vr.settings.scale;\r\n            const elements = [...this.el.web2vr.elements];\r\n            // remove first element that is the backgorund of container\r\n            elements.shift();\r\n\r\n            this.el.pointer.object3D.position.setY(this.pointEndY + evt.detail.intersection.uv.y * (this.pointStartY - this.pointEndY));\r\n\r\n            for (const element of elements) {\r\n                element.position.scrollY = scrollY;\r\n            }\r\n            this.el.web2vr.update();\r\n        }).bind(this));\r\n    },\r\n    play: function () {\r\n        const width = parseFloat(this.el.web2vr.aframe.container.firstElementChild.getAttribute(\"width\"));\r\n        const height = parseFloat(this.el.web2vr.aframe.container.firstElementChild.getAttribute(\"height\"));\r\n\r\n        // init plane size\r\n        this.el.setAttribute(\"width\", width / 20);\r\n        this.el.setAttribute(\"height\", height);\r\n\r\n        //init scrollbar position\r\n        this.el.scrollbar.object3D.position.setX(width + parseFloat(this.el.getAttribute(\"width\") / 2));\r\n        this.el.scrollbar.object3D.position.setY(0 - height / 2); //1.96\r\n        this.el.scrollbar.object3D.position.setZ(-(this.el.web2vr.settings.layerStep*4));\r\n\r\n        // init pointer position and size\r\n        this.el.pointer.setAttribute(\"height\", width / 20);\r\n        this.el.pointer.setAttribute(\"width\", width / 20);\r\n\r\n        this.pointStartY = height / 2 - parseFloat(this.el.pointer.getAttribute(\"height\")) / 2;\r\n        this.pointEndY = this.pointStartY - height + parseFloat(this.el.pointer.getAttribute(\"height\"));\r\n\r\n        this.el.pointer.object3D.position.setY(this.pointStartY);\r\n        this.el.pointer.object3D.position.setZ(this.el.web2vr.settings.layerStep*2);\r\n    }\r\n\r\n});","import TextElement from \"./textElement\";\r\n\r\nexport default class ButtomElement extends TextElement {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n        this.borderColor = new THREE.Color(0x000000);\r\n        this.borderWidth = 1;\r\n    }\r\n\r\n    updateTextPadding() {\r\n        // ignore padding for buttons\r\n    }\r\n\r\n    updateText() {\r\n        if (this.domElement.tagName == \"INPUT\")\r\n            this.textValue = this.domElement.value.replace(/\\s{2,}/g, ' ');\r\n    }\r\n}","import Element from \"./element\";\r\n\r\nexport default class CanvasElement extends Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n\r\n        this.imageId = null;\r\n        this.entity = document.createElement(\"a-image\");\r\n    }\r\n\r\n    updateImage(src) {\r\n        const assetId = this.web2vr.aframe.assetManager.getAsset(src, \"img\");\r\n\r\n        // remove old image if there is new image\r\n        if (this.imageId && this.imageId != assetId)\r\n            this.web2vr.aframe.assetManager.removeAsset(this.imageId);\r\n\r\n        this.entity.setAttribute(\"id\", \"IMAGE_\" + assetId);\r\n        this.entity.setAttribute(\"src\", \"#\" + assetId);\r\n        this.imageId = assetId;\r\n    }\r\n\r\n    specificUpdate() {\r\n        this.updateImage(this.domElement.toDataURL());\r\n    }\r\n}","import Element from \"./element\";\r\n\r\nexport default class CheckBoxElement extends Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n        this.borderColor = new THREE.Color(0x000000);\r\n        this.borderWidth = 1;\r\n        this.entity = document.createElement(\"a-plane\");\r\n        this.domElement.addEventListener(\"click\", (() => {\r\n            this.specificUpdate();\r\n        }).bind(this))\r\n    }\r\n\r\n    specificUpdate() {\r\n        if (this.domElement.checked)\r\n            this.entity.setAttribute(\"color\", \"#0075FF\");\r\n        else\r\n            this.entity.setAttribute(\"color\", \"#FFFFFF\");\r\n    }\r\n}","import Element from \"./element\";\r\nimport Helper from \"../utils/helper\";\r\n\r\nexport default class ContainerElement extends Element {\r\n    constructor(web2vr, domElement, layer, textOnly = false) {\r\n        super(web2vr, domElement, layer);\r\n        this.textOnly = textOnly;\r\n        this.entity = document.createElement(\"a-plane\");\r\n\r\n        // if hyperlink trigger a click event\r\n        if (this.domElement.tagName == \"A\") {\r\n            this.entity.addEventListener(\"click\", () => { console.log(\"Link clicked!\", this.domElement.click()); });\r\n        }\r\n\r\n        if (!this.textOnly) {\r\n            // show back plane for the main container\r\n            if (this.domElement == this.web2vr.container)\r\n                this.entity.setAttribute(\"material\", \"side\", \"double\");\r\n\r\n            // only needed for experimental background\r\n            this.expImageId = null;\r\n            this.oldBackgroundImage = null;\r\n            this.oldDomPosition = null;\r\n        }\r\n    }\r\n\r\n    specificUpdate() {\r\n        if (!this.textOnly) {\r\n            const backgroundColor = this.style.backgroundColor;\r\n            let backgroundImage = this.style.backgroundImage; // to get 1:1 as html have to use background-size: cover; or use experimental\r\n\r\n            if (backgroundImage != \"none\") {\r\n                // cannot use animations that require update to be called every frame. html2canvas is very performance heavy.\r\n                if (this.web2vr.settings.experimental) {\r\n                    if ((backgroundImage != this.oldBackgroundImage || (this.oldDomPosition && !this.position.equalsDOMPosition(this.oldDomPosition)))) {\r\n                        let id = this.domElement.id;\r\n                        let customId = false;\r\n                        if (!id) {\r\n                            customId = true;\r\n                            id = \"html2canvas-\" + this.web2vr.html2canvasIDcounter++;\r\n                            this.domElement.id = id;\r\n                        }\r\n\r\n                        html2canvas(this.domElement, {\r\n                            onclone: (clone) => {\r\n                                const style = document.createElement('style');\r\n\r\n                                clone.head.appendChild(style);\r\n                                // ignoring opacity because we use opacity from aframe\r\n                                style.sheet.insertRule(`\r\n                    #${id} {\r\n                        opacity: 1;\r\n                    }`);\r\n                                // hide the text\r\n                                style.sheet.insertRule(`\r\n                    #${id} {\r\n                        color: transparent;\r\n                    }`);\r\n                                // hide the children elements\r\n                                style.sheet.insertRule(`\r\n                    #${id} > * {\r\n                        display:none\r\n                    }`);\r\n                                // vr-span has to be block so it can render properly\r\n                                style.sheet.insertRule(`\r\n                    #${id} > .vr-span {\r\n                        display:block\r\n                    }`);\r\n                                if (customId)\r\n                                    this.domElement.removeAttribute(\"id\");\r\n                            }\r\n                        }).then(canvas => {\r\n                            if (this.expImageId)\r\n                                this.web2vr.aframe.assetManager.removeAsset(this.expImageId);\r\n                            this.expImageId = this.web2vr.aframe.assetManager.getAsset(canvas.toDataURL(), \"img\");\r\n                            this.entity.setAttribute(\"material\", \"src: #\" + this.expImageId);\r\n                        });\r\n                        this.oldBackgroundImage = backgroundImage;\r\n                    }\r\n                }\r\n                else if (Helper.isUrl(backgroundImage)) {\r\n                    // remove url(\"\")\r\n                    backgroundImage = backgroundImage.substring(backgroundImage.lastIndexOf('(\\\"') + 2, backgroundImage.lastIndexOf('\\\")'));\r\n                    this.entity.setAttribute(\"material\", \"src: #\" + this.web2vr.aframe.assetManager.getAsset(backgroundImage, \"img\"));\r\n                    // transparent images support\r\n                    this.entity.setAttribute(\"material\", \"transparent\", true);\r\n                }\r\n            }\r\n            else {\r\n                // if there is no backgroundColor dont renders\r\n                if (backgroundColor == \"rgba(0, 0, 0, 0)\") {\r\n                    this.entity.setAttribute(\"material\", \"visible\", false);\r\n                }\r\n                else {\r\n                    this.entity.setAttribute(\"material\", \"visible\", true);\r\n                    this.entity.setAttribute(\"color\", backgroundColor);\r\n                    this.updateOpacity();\r\n                }\r\n            }\r\n            this.oldDomPosition = this.position.domPosition;\r\n        }\r\n    }\r\n\r\n    updateOpacity() {\r\n        const alpha = parseFloat(this.style.backgroundColor.split(',')[3]);\r\n        // calculate final alpha channel result\r\n        if (alpha) {\r\n            let a = alpha;\r\n            let b = this.style.opacity;\r\n            if (a < b) {\r\n                b = alpha;\r\n                a = this.style.opacity;\r\n            }\r\n            this.entity.setAttribute(\"opacity\", a - (a - b));\r\n        }\r\n    }\r\n}","import Position from \"../utils/position\";\r\nimport MouseEventHandler from \"../utils/mouseEventHandler\";\r\n\r\nexport default class Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        this.web2vr = web2vr;\r\n        this.domElement = domElement;\r\n        this.layer = layer;\r\n        this.domElement.element = this; // so we can do domeElement.parentNode.element\r\n        this.childElements = new Set();\r\n\r\n        this.entity = null; // aframe entity this null becasue Element class is abstract\r\n        this.visible = true;\r\n        if (this.domElement.classList.contains(\"vr-span\"))\r\n            this.paddingToMargin();\r\n        this.position = new Position(this.domElement.getBoundingClientRect(), layer * this.web2vr.settings.layerStep, web2vr.settings.scale);\r\n        this.style = window.getComputedStyle(this.domElement);\r\n        this.parentTransform = \"none\";\r\n        this.needsStartingTransformSize = true;\r\n    }\r\n\r\n    // call after entity is created in inheriting class\r\n    initEventHandlers() {\r\n        this.initHover();\r\n\r\n        // setting up MouseEventHandler\r\n        this.mouseEventHandle = new MouseEventHandler(this);\r\n\r\n        // dynamic listeners\r\n        this.domElement.addEventListener(\"eventListenerAdded\", () => this.mouseEventHandle.resync());\r\n        this.domElement.addEventListener(\"eventListenerRemoved\", () => this.mouseEventHandle.resync());\r\n    }\r\n\r\n    // add animation compoment if dom element has animation\r\n    checkAnimation() {\r\n        if (parseFloat(this.style.animationDuration) || parseFloat(this.style.transitionDuration))\r\n            this.entity.setAttribute(\"vr-animate\", \"\");\r\n        else\r\n            this.entity.removeAttribute(\"vr-animate\");\r\n    }\r\n\r\n    initHover() {\r\n        // find what has hover\r\n        let tag = null;\r\n        if (this.web2vr.hoverSelectors.has(this.domElement.tagName.toLowerCase()))\r\n            tag = this.domElement.tagName.toLowerCase();\r\n        let classes = [];\r\n        for (const cls of this.domElement.classList) {\r\n            if (this.web2vr.hoverSelectors.has(\".\" + cls))\r\n                classes.push(cls);\r\n        }\r\n        let id = null;\r\n        if (this.web2vr.hoverSelectors.has(\"#\" + this.domElement.id))\r\n            id = this.domElement.id;\r\n\r\n        // add mouseenter and mouseleave if element has hover.\r\n        if (tag || classes.length > 0 || id) {\r\n            this.entity.addEventListener(\"mouseenter\", () => {\r\n                if (tag)\r\n                    this.domElement.classList.add(tag + \"hover\");\r\n                if (classes.length > 0)\r\n                    for (const cls of classes)\r\n                        this.domElement.classList.add(cls + \"hover\");\r\n                if (id)\r\n                    this.domElement.classList.add(id + \"hover\");\r\n                // this is only for hover transform. Update all elements when transform gets added\r\n                if (this.style.transform != \"none\") {\r\n                    this.web2vr.update();\r\n                    this.hoverTransform = true;\r\n                }\r\n\r\n            });\r\n            this.entity.addEventListener(\"mouseleave\", () => {\r\n                if (tag)\r\n                    this.domElement.classList.remove(tag + \"hover\");\r\n                if (classes.length > 0)\r\n                    for (const cls of classes)\r\n                        this.domElement.classList.remove(cls + \"hover\");\r\n                if (id)\r\n                    this.domElement.classList.remove(id + \"hover\");\r\n                if (this.hoverTransform) {\r\n                    this.position.depth = this.position.startDepth;\r\n                    for (const element of this.domElement.querySelectorAll('*')) {\r\n                        if (element.element) {\r\n                            element.element.parentTransform = \"none\";\r\n                            element.element.position.depth = element.element.position.startDepth;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // getBoundingClientRect works great with margin while with padding it has problems with paddingRight that needs to be manualy calculated and set\r\n    // because dealing with paddingRight is problematic we can make the padding be margin for the textNode(vr-span)\r\n    paddingToMargin() {\r\n        // only if element has text\r\n        if (this.domElement.textContent.trim()) {\r\n            //const left = this.domElement.parentElement.element.style.paddingLeft;\r\n            const right = this.domElement.parentElement.element.style.paddingRight;\r\n            //const top = this.domElement.parentElement.element.style.paddingTop;\r\n            //const bottom = this.domElement.parentElement.element.style.paddingBottom;\r\n\r\n            /*if (parseFloat(left)) {\r\n                this.domElement.style.marginLeft = left;\r\n                this.domElement.parentElement.style.paddingLeft = \"0px\";\r\n            }*/\r\n            if (parseFloat(right)) {\r\n                this.domElement.style.marginRight = right;\r\n                this.domElement.parentElement.style.paddingRight = \"0px\";\r\n            }\r\n            /*if (parseFloat(top)) {\r\n                this.domElement.style.marginTop = top;\r\n                //this.domElement.parentElement.style.paddingTop = \"0px\";\r\n            }\r\n            if (parseFloat(bottom)) {\r\n                this.domElement.style.marginBottom = bottom;\r\n                //this.domElement.parentElement.style.paddingBottom = \"0px\";\r\n            }*/\r\n        }\r\n    }\r\n\r\n    init() {\r\n        // reference of the element for aframe compoment\r\n        this.entity.element = this;\r\n\r\n        // dont need light to affect material\r\n        this.entity.setAttribute(\"material\", \"shader\", \"flat\");\r\n\r\n        //init sizes at start\r\n        this.entity.setAttribute(\"width\", this.position.width);\r\n        this.entity.setAttribute(\"height\", this.position.height);\r\n\r\n        this.initEventHandlers();\r\n\r\n        this.setupClipping();\r\n    }\r\n\r\n    update() {\r\n        const clientRect = this.domElement.getBoundingClientRect();\r\n\r\n        // its not on the screen\r\n        if (clientRect.width == 0 || clientRect.height == 0) {\r\n            this.entity.object3D.visible = false;\r\n            if (!this.domElement.classList.contains(\"vr-span\"))\r\n                this.entity.classList.remove(this.web2vr.settings.interactiveTag);\r\n            this.position.aframePosition.y = 1000; // for some reason raycast still hits so have to move position\r\n            return;\r\n        }\r\n\r\n        // for future move this in TextElement class\r\n        if (this.domElement.classList.contains(\"vr-span\")) {\r\n            // dont need interaction with the text when we always have the background as interaction\r\n            this.entity.classList.remove(this.web2vr.settings.interactiveTag);\r\n            // so all inline text width is good, dont do this if its text inside button\r\n            if (this.domElement.parentElement.tagName != \"BUTTON\") {\r\n                clientRect.width += 8;\r\n                clientRect.x -= 2;\r\n            }\r\n        }\r\n\r\n        // set fixed container height if its using scrollBody, best is to move this code outside update loop for future\r\n        if (this.web2vr.scroll.hasScroll && this.domElement == this.web2vr.container && this.web2vr.scroll.scrollBody)\r\n            clientRect.height = this.web2vr.settings.scrollWindowHeight;\r\n        this.position.updatePosition(clientRect);\r\n\r\n        this.checkVisible();\r\n        if (this.visible) {\r\n            this.style = window.getComputedStyle(this.domElement);\r\n\r\n            // its on visible screen but its hidden by style\r\n            if (this.style.visibility === \"hidden\" || this.style.display === \"none\") {\r\n                this.entity.object3D.visible = false;\r\n                if (!this.domElement.classList.contains(\"vr-span\"))\r\n                    this.entity.classList.remove(this.web2vr.settings.interactiveTag);\r\n                this.position.aframePosition.y = 1000; // for some reason raycast still hits so have to move position\r\n                // update border so we can remove it because element is hidden\r\n                this.updateBorder();\r\n                return;\r\n            }\r\n            else {\r\n                this.entity.object3D.visible = true;\r\n                // for input text because it has custom event for entity it cannot detect with this.mouseEventHandle.listeningForMouseEvents\r\n                // we have to check tagName and type to see if its input text, for future make this work with mouseEventHandle\r\n                // also add interactiveTag if its main container\r\n                if ((!this.domElement.classList.contains(\"vr-span\") && (this.mouseEventHandle.listeningForMouseEvents || (this.domElement.tagName == \"INPUT\" && this.domElement.type == \"text\")) || this.domElement == this.web2vr.container))\r\n                    this.entity.classList.add(this.web2vr.settings.interactiveTag);\r\n            }\r\n\r\n            // if there is transform then width and height will be set with the transform matrix scale\r\n            // using needsStartingTransformSize so width and height are never 0 when doing transform scale\r\n            if (this.style.transform == \"none\" || this.needsStartingTransformSize) {\r\n                this.entity.setAttribute(\"width\", this.position.width);\r\n                this.entity.setAttribute(\"height\", this.position.height);\r\n            }\r\n\r\n            this.checkAnimation();\r\n\r\n            const opacity = this.style.opacity;\r\n            this.entity.setAttribute(\"opacity\", opacity);\r\n\r\n            this.specificUpdate();\r\n            this.updateTransform();\r\n            this.updateClipping();\r\n        }\r\n        this.updateBorder();\r\n    }\r\n\r\n    updateTransform() {\r\n\r\n        let transform = this.style.transform;\r\n        if (transform == \"none\")\r\n            transform = this.parentTransform;\r\n        else {\r\n            // give transform to all descendents\r\n            for (const element of this.domElement.querySelectorAll('*')) {\r\n                if (element.element)\r\n                    element.element.parentTransform = transform;\r\n            }\r\n        }\r\n\r\n        if (transform != \"none\") {\r\n            this.needsStartingTransformSize = false;\r\n            const matrixType = transform.split('(')[0];\r\n            // get matrix values in float\r\n            let values = transform.split('(')[1];\r\n            values = values.split(')')[0];\r\n            values = values.split(',');\r\n            values = values.map(v => parseFloat(v));\r\n            let matrix = null;\r\n\r\n            if (matrixType == \"matrix\") {\r\n                // transform to matrix4x4 and invert skewX to match three.js\r\n                matrix = new THREE.Matrix4().fromArray([values[0], values[1], 0, 0, -values[2], values[3], 0, 0, 0, 0, 1, 0, values[4], values[5], 0, 1]);\r\n            }\r\n            else if (matrixType == \"matrix3d\") {\r\n                // invert skewX and skewZ? to match three.js\r\n                values[4] *= -1;\r\n                values[9] *= -1;\r\n                matrix = new THREE.Matrix4().fromArray(values);\r\n            }\r\n            const position = new THREE.Vector3();\r\n            const quaternion = new THREE.Quaternion();\r\n            const scale = new THREE.Vector3();\r\n            matrix.decompose(position, quaternion, scale);\r\n\r\n            // position\r\n            this.position.domPosition.x += position.x;\r\n            this.position.domPosition.y += position.y;\r\n            if (position.z != 0)\r\n                this.position.depth = position.z * this.position.scalingFactor + this.position.startDepth;\r\n\r\n            // rotation\r\n            this.entity.object3D.rotation.setFromRotationMatrix(matrix);\r\n\r\n            // calcualte scale and set it to entity\r\n            if (this.parentTransform == \"none\") {\r\n                const elements = matrix.elements;\r\n                const scaleX = Math.sqrt(elements[0] * elements[0] + elements[1] * elements[1]);\r\n                const scaleY = Math.sqrt(elements[5] * elements[5] + elements[4] * elements[4]);\r\n                // for radio scale is 2 times smaller because its circle, for some rason checkbox scale needs to be in half else its too big\r\n                if (this.domElement.tagName == \"INPUT\" && (this.domElement.type == \"radio\" || this.domElement.type == \"checkbox\"))\r\n                    this.entity.object3D.scale.set(scaleX / 2, scaleY / 2, 1);\r\n                else\r\n                    this.entity.object3D.scale.set(scaleX, scaleY, 1);\r\n            }\r\n        }\r\n        this.entity.object3D.position.set(this.position.x, this.position.y, this.position.z);\r\n    }\r\n\r\n    // abstract method\r\n    specificUpdate() {\r\n\r\n    }\r\n\r\n    updateBorder() {\r\n        if (this.web2vr.settings.border) {\r\n            // using borderTopWidth and borderTopColor because borderWidth and borderColor doesnt work in firefox\r\n            const borderWidth = parseFloat(this.style.borderTopWidth);\r\n            if ((borderWidth || this.borderWidth) && this.entity.object3D.visible) {\r\n                this.entity.setAttribute(\"vr-border\", `width:${borderWidth}; color:${this.style.borderTopColor};`);\r\n                this.entity.components[\"vr-border\"].updateBorder();\r\n            }\r\n            else if (this.entity.components[\"vr-border\"])\r\n                this.entity.removeAttribute(\"vr-border\");\r\n        }\r\n    }\r\n\r\n    rotateNormal(normal) {\r\n        const normalMatrix = new THREE.Matrix3().getNormalMatrix(this.web2vr.aframe.container.object3D.matrixWorld);\r\n        const output = normal.clone().applyMatrix3(normalMatrix).normalize();\r\n        return output;\r\n    }\r\n\r\n    getClippingContext() {\r\n        let output = null;\r\n\r\n        if (this.domElement.parentNode && this.domElement.parentNode.element && this.domElement.parentNode.element.clippingContext)\r\n            output = this.domElement.parentNode.element.clippingContext;\r\n        else {\r\n            if ((this.style.overflow && this.style.overflow == \"hidden\") || (this.web2vr.scroll.hasScroll && this.domElement == this.web2vr.container) || (this.web2vr.settings.forceClipping && this.domElement == this.web2vr.container)) {\r\n                // ignore if its svg\r\n                if (this.domElement.tagName != \"svg\") {\r\n                    let clippingContext = {};\r\n                    clippingContext.authority = this;\r\n\r\n                    clippingContext.bottom = new THREE.Plane(this.rotateNormal(new THREE.Vector3(0, 1, 0))); // normal up\r\n                    clippingContext.top = new THREE.Plane(this.rotateNormal(new THREE.Vector3(0, -1, 0))); // normal down\r\n                    clippingContext.left = new THREE.Plane(this.rotateNormal(new THREE.Vector3(1, 0, 0))); // normal right\r\n                    clippingContext.right = new THREE.Plane(this.rotateNormal(new THREE.Vector3(-1, 0, 0))); // normal left\r\n\r\n                    clippingContext.planes = [clippingContext.bottom, clippingContext.top, clippingContext.left, clippingContext.right];\r\n\r\n                    output = clippingContext;\r\n                }\r\n            }\r\n        }\r\n        return output;\r\n    }\r\n\r\n    setupClipping() {\r\n        const clippingContext = this.getClippingContext();\r\n\r\n        if (clippingContext) {\r\n            this.clippingContext = clippingContext;\r\n\r\n            // we are sure the renderer is loaded\r\n            const object3D = this.entity.object3D;\r\n            if (!object3D || !object3D.children || !object3D.children.length > 0 || !object3D.children[0].material) {\r\n                return;\r\n            }\r\n\r\n            const material = object3D.children[0].material;\r\n            material.clippingPlanes = clippingContext.planes;\r\n\r\n            //this.updateClipping();\r\n            setTimeout(() => { this.updateClipping(); }, 200); // if it doesnt work use this\r\n        }\r\n    }\r\n\r\n    updateClipping() {\r\n        // only element with authority can change the clipping planes position\r\n        if (!this.clippingContext || this.clippingContext.authority != this)\r\n            return;\r\n\r\n        const position = this.entity.object3D.position;\r\n\r\n        const bottomLocal = position.clone().add((new THREE.Vector3(0, -1, 0)).multiplyScalar(this.position.height / 2));\r\n        const topLocal = position.clone().add((new THREE.Vector3(0, 1, 0)).multiplyScalar(this.position.height / 2));\r\n        const leftLocal = position.clone().add((new THREE.Vector3(-1, 0, 0)).multiplyScalar(this.position.width / 2));\r\n        const rightLocal = position.clone().add((new THREE.Vector3(1, 0, 0)).multiplyScalar(this.position.width / 2));\r\n\r\n        const bottomGlobal = this.web2vr.aframe.container.object3D.localToWorld(bottomLocal.clone());\r\n        const topGlobal = this.web2vr.aframe.container.object3D.localToWorld(topLocal.clone());\r\n        const leftGlobal = this.web2vr.aframe.container.object3D.localToWorld(leftLocal.clone());\r\n        const rightGlobal = this.web2vr.aframe.container.object3D.localToWorld(rightLocal.clone());\r\n\r\n        this.clippingContext.bottom.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(0, 1, 0)), bottomGlobal).normalize();\r\n        this.clippingContext.top.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(0, -1, 0)), topGlobal).normalize();\r\n        this.clippingContext.left.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(1, 0, 0)), leftGlobal).normalize();\r\n        this.clippingContext.right.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(-1, 0, 0)), rightGlobal).normalize();\r\n\r\n        if (this.web2vr.settings.showClipping) {\r\n            if (!this.clippingPlaneHelpers) {\r\n                this.clippingPlaneHelpers = [];\r\n\r\n                for (const plane of this.clippingContext.planes) {\r\n                    const material = new THREE.MeshBasicMaterial({ color: 0x00e33d, side: THREE.DoubleSide });\r\n                    const geometry = new THREE.PlaneGeometry(200 * this.position.scalingFactor, 200 * this.position.scalingFactor); // no need same width and height as container because this is only for debugging\r\n                    const mesh = new THREE.Mesh(geometry, material);\r\n\r\n                    mesh.debugPlane = plane;\r\n                    this.clippingPlaneHelpers.push(mesh);\r\n\r\n                    const axisHelper = new THREE.AxesHelper(5);\r\n                    mesh.add(axisHelper);\r\n                }\r\n\r\n                for (const helper of this.clippingPlaneHelpers) {\r\n                    this.web2vr.aframe.scene.object3D.add(helper);\r\n                }\r\n            }\r\n            for (const mesh of this.clippingPlaneHelpers) {\r\n                mesh.visible = true;\r\n\r\n                const worldPos = new THREE.Vector3();\r\n                this.entity.object3D.getWorldPosition(worldPos);\r\n                const point = new THREE.Vector3();\r\n                mesh.debugPlane.projectPoint(worldPos, point);\r\n                mesh.position.set(point.x, point.y, point.z);\r\n\r\n                // clipping plane normals are inverted, we multiply by -1\r\n                const focalPoint = point.clone().add(mesh.debugPlane.normal.clone().multiplyScalar(-1));\r\n                mesh.lookAt(focalPoint);\r\n            }\r\n\r\n        }\r\n        else {\r\n            if (this.clippingPlaneHelpers) {\r\n                for (const mesh of this.clippingPlaneHelpers)\r\n                    mesh.visible = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    checkVisible() {\r\n        if (this.clippingContext) {\r\n            const container = this.clippingContext.authority;\r\n            if (this.position.bottom.y > container.position.top.y || this.position.top.y < container.position.bottom.y) {\r\n                this.visible = false;\r\n                this.entity.object3D.visible = false;\r\n                // remove interactive tag\r\n                if (!this.domElement.classList.contains(\"vr-span\"))\r\n                    this.entity.classList.remove(this.web2vr.settings.interactiveTag);\r\n            }\r\n            else {\r\n                this.visible = true;\r\n                this.entity.object3D.visible = true;\r\n                // interactive tag so we can do raycasting if it has mouse events or its container background\r\n                if ((!this.domElement.classList.contains(\"vr-span\") && this.mouseEventHandle.listeningForMouseEvents) || this.domElement == this.web2vr.container)\r\n                    this.entity.classList.add(this.web2vr.settings.interactiveTag);\r\n            }\r\n        }\r\n    }\r\n}","import Element from \"./element\";\r\n\r\nexport default class ImageElement extends Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n\r\n        this.currentSrc = null;\r\n        this.changed = false;\r\n        this.entity = document.createElement(\"a-image\");\r\n        this.entity.setAttribute(\"material\", \"side\", \"front\");\r\n        // know when image is loaded\r\n        this.loaded = false;\r\n        this.domElement.addEventListener(\"load\", () => {\r\n            this.loaded = true;\r\n            // if image changed update all after image loaded\r\n            if (this.changed) {\r\n                this.changed = false;\r\n                this.web2vr.update();\r\n            }\r\n        });\r\n    }\r\n    updateImage(src) {\r\n        const assetID = this.web2vr.aframe.assetManager.getAsset(src, \"img\");\r\n        this.entity.setAttribute(\"id\", \"IMAGE_\" + assetID);\r\n\r\n        const isGif = /\\.(gif)$/i;\r\n        if (isGif.test(src)) {\r\n            this.entity.setAttribute(\"material\", \"shader\", \"gif\");\r\n            this.entity.setAttribute(\"material\", \"src\", \"#\" + assetID);\r\n        }\r\n        else {\r\n            this.entity.setAttribute(\"material\", \"shader\", \"flat\");\r\n            this.entity.setAttribute(\"src\", \"#\" + assetID);\r\n        }\r\n    }\r\n\r\n    specificUpdate() {\r\n        const src = this.domElement.getAttribute(\"src\");\r\n        if (src != this.currentSrc) {\r\n            if (this.currentSrc) {\r\n                this.loaded = false;\r\n                this.changed = true;\r\n            }\r\n            this.currentSrc = src;\r\n            this.updateImage(this.currentSrc);\r\n        }\r\n    }\r\n}\r\n\r\n// TODO: No need to save image copy in assets you can directly read it from the orignal","import TextElement from \"./textElement\";\r\n\r\nexport default class InputElement extends TextElement {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n        this.borderColor = new THREE.Color(0x000000);\r\n        this.borderWidth = 1;\r\n        this.active = false;\r\n\r\n        // update when there is change of value\r\n        this.domElement.addEventListener(\"input\", () => this.update());\r\n        // when clicked make it active input for the keyboard and position the keyboard relative to camera\r\n        this.entity.addEventListener(\"click\", () => {\r\n            const camera = this.web2vr.aframe.scene.camera.parent;\r\n            const keyboard = this.web2vr.aframe.keyboard.object3D;\r\n\r\n            keyboard.position.copy(camera.position);\r\n            keyboard.rotation.copy(camera.rotation);\r\n            keyboard.rotation.z = 0;\r\n            keyboard.rotation.x = THREE.Math.degToRad(-30);\r\n            keyboard.translateX(-0.24);\r\n            keyboard.translateY(-0.1);\r\n            keyboard.translateZ(-0.6);\r\n            keyboard.visible = true;\r\n\r\n            if (this.web2vr.aframe.keyboard.activeInput){\r\n                this.web2vr.aframe.keyboard.activeInput.element.active = false;\r\n                // update web2vr where activeInput is located\r\n                this.web2vr.aframe.keyboard.activeInput.element.web2vr.update();\r\n            }\r\n            this.active = true;\r\n\r\n            this.web2vr.aframe.keyboard.activeInput = this.domElement;\r\n            this.web2vr.update();\r\n        })\r\n    }\r\n\r\n    updateText() {\r\n        const value = this.domElement.value;\r\n        if (value)\r\n            this.textValue = value;\r\n        else\r\n            this.textValue = this.domElement.placeholder;\r\n    }\r\n    updateTextColor() {\r\n        const value = this.domElement.value;\r\n        if (value)\r\n            super.updateTextColor();\r\n        else\r\n            this.entity.setAttribute(\"text\", \"color\", \"#999\");\r\n\r\n        if (this.active)\r\n            this.entity.setAttribute(\"color\", \"#ffffcc\");\r\n    }\r\n}","import Element from \"./element\";\r\n\r\nexport default class RadioElement extends Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n        this.borderColor = new THREE.Color(0x000000);\r\n        this.borderWidth = 1;\r\n        this.entity = document.createElement(\"a-circle\");\r\n        this.domElement.addEventListener(\"click\", (() => {\r\n            this.web2vr.update();\r\n        }).bind(this));\r\n    }\r\n\r\n    specificUpdate() {\r\n        this.entity.setAttribute(\"radius\", this.position.width / 2);\r\n        \r\n            if (this.domElement.checked)\r\n                this.entity.setAttribute(\"color\", \"#0075FF\");\r\n            else\r\n                this.entity.setAttribute(\"color\", \"#FFFFFF\");\r\n        }\r\n    }","import Element from \"./element\";\r\n\r\nexport default class SvgElement extends Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n\r\n        this.imageId = null;\r\n        this.entity = document.createElement(\"a-image\");\r\n    }\r\n\r\n    svgToImage() {\r\n        const svgString = new XMLSerializer().serializeToString(this.domElement);\r\n        const canvas = document.createElement(\"canvas\");\r\n        const ctx = canvas.getContext(\"2d\");\r\n        canvas.width = this.position.domPosition.width * 2;\r\n        canvas.height = this.position.domPosition.height * 2;\r\n\r\n        const DOMURL = self.URL || self.webkitURL || self;\r\n        const img = new Image();\r\n        const svg = new Blob([svgString], { type: \"image/svg+xml;charset=utf-8\" });\r\n        const url = DOMURL.createObjectURL(svg);\r\n\r\n        img.onload = () => {\r\n            if (this.domElement.style.width)\r\n                ctx.drawImage(img, 0, 0, canvas.width*2, canvas.height*2);\r\n            else\r\n                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n\r\n            DOMURL.revokeObjectURL(url);\r\n            this.updateImage(canvas.toDataURL());\r\n            canvas.remove();\r\n        };\r\n        img.src = url;\r\n    }\r\n    updateImage(src) {\r\n        const assetId = this.web2vr.aframe.assetManager.getAsset(src, \"img\");\r\n\r\n        // remove old image if there is new image\r\n        if (this.imageId && this.imageId != assetId)\r\n            this.web2vr.aframe.assetManager.removeAsset(this.imageId);\r\n\r\n        this.entity.setAttribute(\"id\", \"IMAGE_\" + assetId);\r\n        this.entity.setAttribute(\"src\", \"#\" + assetId);\r\n        this.imageId = assetId;\r\n    }\r\n\r\n    specificUpdate() {\r\n        this.svgToImage();\r\n    }\r\n}","import ContainerElement from \"./containerElement\";\r\n\r\nexport default class TextElement extends ContainerElement {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer, false);\r\n\r\n        this.entity.setAttribute(\"text\", \"value\", \"\");\r\n        this.textValue = null;\r\n    }\r\n\r\n    setupClipping() {\r\n        let clippingContext = this.getClippingContext();\r\n\r\n        if (clippingContext) {\r\n            this.clippingContext = clippingContext;\r\n\r\n            let material = this.entity.components.text.material;\r\n\r\n            // text component uses custom shader so default three.js clipping doesnt work, needed to inject clipping shader code inside the custom shader code(RawShaderMaterial)\r\n            // help from https://stackoverflow.com/questions/42532545/add-clipping-to-three-shadermaterial\r\n            // 1.1.0 version changes: Because Aframe 1.1.0 changes text material shader to use webgl 2(glsl 3) some of the three.js ShaderChunk had to be converted to glsl 3.\r\n            const fragmentShader = `#version 300 es\r\n            precision highp float;\r\n            uniform bool negate;\r\n            uniform float alphaTest;\r\n            uniform float opacity;\r\n            uniform sampler2D map;\r\n            uniform vec3 color;\r\n            in vec2 vUV;\r\n            out vec4 fragColor;\r\n            float median(float r, float g, float b) {\r\n                return max(min(r, g), min(max(r, g), b));\r\n            }\r\n            #define BIG_ENOUGH 0.001\r\n            #define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)\r\n            \r\n            // clipping_planes_pars_fragment converted to glsl 3\r\n            #if NUM_CLIPPING_PLANES > 0\r\n                in vec3 vClipPosition;\r\n                uniform vec4 clippingPlanes[NUM_CLIPPING_PLANES];\r\n            #endif\r\n            \r\n            void main() {\r\n                // compatible with glsl 3\r\n                #include <clipping_planes_fragment>\r\n\r\n                vec3 sampleColor = texture(map, vUV).rgb;\r\n                if (negate) { sampleColor = 1.0 - sampleColor; }\r\n                float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;\r\n                float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);\r\n                float dscale = 0.353505;\r\n                vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));\r\n                float isBigEnough = max(abs(duv.x), abs(duv.y));\r\n                // Do modified alpha test.\r\n                if (isBigEnough > BIG_ENOUGH) {\r\n                    float ratio = BIG_ENOUGH / isBigEnough;\r\n                    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);\r\n                }\r\n                // Do modified alpha test.\r\n                if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }\r\n                fragColor = vec4(color.xyz, alpha * opacity);\r\n            }`;\r\n\r\n            const vertexShader = `#version 300 es\r\n            in vec2 uv;\r\n            in vec3 position;\r\n            uniform mat4 projectionMatrix;\r\n            uniform mat4 modelViewMatrix;\r\n            out vec2 vUV;\r\n\r\n            // clipping_planes_pars_vertex converted to glsl 3\r\n            #if NUM_CLIPPING_PLANES > 0\r\n\t            out vec3 vClipPosition;\r\n            #endif\r\n\r\n            void main(void) {\r\n                // compatible with glsl 3\r\n                #include <begin_vertex>\r\n\r\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n                vUV = uv;\r\n\r\n                // compatible with glsl 3\r\n                #include <project_vertex>\r\n                #include <clipping_planes_vertex>\r\n\r\n            }`;\r\n\r\n            material.fragmentShader = fragmentShader;\r\n            material.vertexShader = vertexShader;\r\n            material.clipping = true;\r\n            material.clippingPlanes = clippingContext.planes;\r\n\r\n            this.updateClipping();\r\n        }\r\n    }\r\n\r\n    updateTextAlignment() {\r\n        // align css text-align to text component\r\n        let align = this.style.textAlign;\r\n        if (![\"left\", \"right\", \"center\"].includes(align))\r\n            align = \"left\";\r\n        this.entity.setAttribute(\"text\", \"align\", align);\r\n\r\n        // set text lineHeight if it has custom css lineHeight\r\n        const text = this.entity.components.text;\r\n        if (this.style.lineHeight != \"normal\" && (typeof text.currentFont != \"undefined\")) {\r\n            this.entity.setAttribute(\"text\", \"lineHeight\", text.currentFont.common.lineHeight + parseFloat(this.style.lineHeight));\r\n        }\r\n    }\r\n\r\n    updateTextSize() {\r\n        const actualFontSize = parseFloat(this.style.fontSize);\r\n        const width = this.position.width;\r\n\r\n        const widthInPixels = width / this.position.scalingFactor;\r\n        let wrapPixels = widthInPixels * 42 / actualFontSize;\r\n        wrapPixels *= 1.107; //1.10706774183070233\r\n        this.entity.setAttribute(\"text\", \"wrapPixels\", wrapPixels);\r\n        this.entity.setAttribute(\"text\", \"width\", width);\r\n    }\r\n\r\n    updateTextColor() {\r\n        // opacity from parent because it doesnt pass it to children\r\n        const opacity = this.domElement.parentElement.element.style.opacity;\r\n        this.entity.setAttribute(\"text\", \"opacity\", opacity);\r\n\r\n        const textColor = this.style.color;\r\n        this.entity.setAttribute(\"text\", \"color\", textColor);\r\n    }\r\n\r\n    updateText() {\r\n        // remove new lines and whitespaces\r\n        this.textValue = this.domElement.textContent.replace(/\\s{2,}/g, ' ');\r\n    }\r\n\r\n    specificUpdate() {\r\n        super.specificUpdate();\r\n\r\n        this.updateTextSize();\r\n        this.updateTextAlignment();\r\n        this.updateText();\r\n        this.entity.setAttribute(\"text\", \"value\", this.textValue);\r\n        this.updateTextColor();\r\n    }\r\n}","import Element from \"./element\";\r\n\r\nexport default class VideoElement extends Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n        // normal video\r\n        this.entity = document.createElement(\"a-video\");\r\n        // 360 video\r\n        this.video360 = document.createElement(\"a-videosphere\");\r\n        this.web2vr.aframe.scene.appendChild(this.video360);\r\n\r\n        this.createClickEvent();\r\n\r\n        this.domElement.addEventListener(\"play\", () => {\r\n            if (this.domElement.hasAttribute(\"vr\"))\r\n                this.video360.components.material.material.map.image.play();\r\n        });\r\n\r\n        this.domElement.addEventListener(\"pause\", () => {\r\n            if (this.domElement.hasAttribute(\"vr\"))\r\n                this.video360.components.material.material.map.image.pause();\r\n        });\r\n    }\r\n\r\n    createClickEvent() {\r\n        // for normal video\r\n        this.domElement.addEventListener(\"click\", () => {\r\n            this.domElement.paused ? this.domElement.play() : this.domElement.pause();\r\n        });\r\n    }\r\n\r\n    specificUpdate() {\r\n        const src = this.domElement.currentSrc;\r\n        let id = this.domElement.id;\r\n\r\n        // if there is no video id generate new id\r\n        if(!id){\r\n            id = this.web2vr.aframe.assetManager.updateCurrentAssetIdReturn();\r\n            this.domElement.id = id;\r\n        }\r\n\r\n        if (this.domElement.hasAttribute(\"vr\")) {\r\n            this.video360.object3D.visible = true;\r\n            this.video360.classList.add(this.web2vr.settings.interactiveTag);\r\n            this.entity.object3D.visible = false;\r\n            this.entity.classList.remove(this.web2vr.settings.interactiveTag);\r\n\r\n            this.video360.setAttribute(\"src\", \"#\" + id);\r\n            // set video360 rotation\r\n            const rotation = this.domElement.getAttribute(\"vr\");\r\n            if (rotation)\r\n                this.video360.object3D.rotation.y = THREE.Math.degToRad(rotation);\r\n            else\r\n                this.video360.object3D.rotation.y = 0;\r\n        }\r\n        else {\r\n            this.video360.object3D.visible = false;\r\n            this.video360.classList.remove(this.web2vr.settings.interactiveTag);\r\n            this.entity.object3D.visible = true;\r\n            this.entity.classList.add(this.web2vr.settings.interactiveTag);\r\n\r\n            this.entity.setAttribute(\"src\", \"#\" + id);\r\n        }\r\n    }\r\n}","!function(e){var t={};function a(d){if(t[d])return t[d].exports;var n=t[d]={i:d,l:!1,exports:{}};return e[d].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,d){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:d})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)a.d(d,n,function(t){return e[t]}.bind(null,n));return d},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=0)}([function(e,t,a){a(1),a(3);const d=a(4),n={mode:\"normal\"};n.template=new d,e.exports=window.AFK=n},function(e,t,a){const d=a(2);if(\"undefined\"==typeof AFRAME)throw new Error(\"Component attempted to register before AFRAME was available.\");AFRAME.registerComponent(\"a-keyboard\",{schema:{audio:{default:!1},color:{default:\"#fff\"},highlightColor:{default:\"#1a79dc\"},dismissable:{default:!0},font:{default:\"monoid\"},fontSize:{default:\"0.39\"},locale:{default:\"en\"},model:{default:\"\"},baseTexture:{default:\"\"},keyTexture:{default:\"\"},verticalAlign:{default:\"center\"}},init:function(){AFK.template.draw({...this.data,el:this.el}),this.attachEventListeners()},attachEventListeners:function(){window.addEventListener(\"keydown\",this.handleKeyboardPress),this.el.addEventListener(\"click\",this.handleKeyboardVR)},removeEventListeners:function(){window.removeEventListener(\"keydown\",this.handleKeyboardPress),this.el.removeEventListener(\"click\",this.handleKeyboardVR)},handleKeyboardPress:function(e){d(e)},handleKeyboardVR:function(e){d(e,\"vr\")},remove:function(){this.removeEventListeners()}})},function(e,t){e.exports=function(e,t){let a;const d=new Set([16,17,18,20,33,34,35,36,45,46,112,113,114,115,116,117,118,119,120,121,122,123]),n=e.key&&e.key.charCodeAt(0);let r=e.key,s=e.keyCode;if(\"vr\"===t)s=parseInt(document.querySelector(`#${e.target.id}`).getAttribute(\"key-code\")),r=document.querySelector(`#${e.target.id}`).getAttribute(\"value\");else if(d.has(e.keyCode))return;switch(s){case 9:a=new CustomEvent(\"a-keyboard-update\",{detail:{code:s,value:\"\\t\"}}),document.dispatchEvent(a);break;case 8:a=new CustomEvent(\"a-keyboard-update\",{detail:{code:s,value:\"\"}}),document.dispatchEvent(a);break;case 13:a=new CustomEvent(\"a-keyboard-update\",{detail:{code:s,value:\"\\n\"}}),document.dispatchEvent(a);break;case 16:AFK.template.toggleActiveMode(\"shift\");break;case 18:AFK.template.toggleActiveMode(\"alt\");break;case 27:this.dismissable&&(a=new CustomEvent(\"a-keyboard-update\",{detail:{code:s,value:\"\"}}),document.dispatchEvent(a));break;case 32:a=new CustomEvent(\"a-keyboard-update\",{detail:{code:s,value:\" \"}}),document.dispatchEvent(a);break;default:a=new CustomEvent(\"a-keyboard-update\",{detail:{code:s,value:r}}),document.dispatchEvent(a)}if(\"vr\"!==t){const t=document.querySelector(`#a-keyboard-${n}`)||document.querySelector(`#a-keyboard-${e.keyCode}`);t&&(t.dispatchEvent(new Event(\"mousedown\")),setTimeout((function(){t.dispatchEvent(new Event(\"mouseleave\"))}),80))}}},function(e,t){if(\"undefined\"==typeof AFRAME)throw new Error(\"Component attempted to register before AFRAME was available.\");AFRAME.registerComponent(\"keyboard-button\",{init:function(){const e=this.el;e.addEventListener(\"mousedown\",(function(){e.setAttribute(\"material\",\"opacity\",\"0.7\")})),e.addEventListener(\"mouseup\",()=>{e.setAttribute(\"material\",\"opacity\",this.isMouseEnter?\"0.9\":\"0\")}),e.addEventListener(\"mouseenter\",()=>{e.setAttribute(\"material\",\"opacity\",\"0.9\"),self.isMouseEnter=!0}),e.addEventListener(\"mouseleave\",()=>{e.setAttribute(\"material\",\"opacity\",\"0\"),self.isMouseEnter=!1})}})},function(e,t,a){const d=a(5);e.exports=class{constructor(){this.keyboardKeys={},this.activeMode=\"normal\"}draw(e){for(const t in e)this[t]=e[t];this.keyboardKeys=d(e.locale),this.drawKeyboard()}drawButton(e){const t=e.key,a=t.size.split(\" \")[0],d=t.size.split(\" \")[1],n=document.createElement(\"a-entity\");n.setAttribute(\"position\",e.position);const r=document.createElement(\"a-entity\");r.setAttribute(\"geometry\",`primitive: plane; width: ${a}; height: ${d};`),this.keyTexture&&this.keyTexture.length>0?r.setAttribute(\"material\",`src: ${this.keyTexture}`):r.setAttribute(\"material\",\"color: #4a4a4a; opacity: 0.9\");const s=document.createElement(\"a-text\");s.id=`a-keyboard-${t.code}`,s.setAttribute(\"key-code\",t.code),s.setAttribute(\"value\",t.value),s.setAttribute(\"align\",\"center\"),s.setAttribute(\"baseline\",this.verticalAlign),s.setAttribute(\"position\",\"0 0 0.001\"),s.setAttribute(\"width\",this.fontSize),s.setAttribute(\"height\",this.fontSize),s.setAttribute(\"geometry\",`primitive: plane; width: ${a}; height: ${d}`),s.setAttribute(\"material\",`opacity: 0.0; transparent: true; color: ${this.highlightColor}`),s.setAttribute(\"color\",this.color),s.setAttribute(\"font\",this.font),s.setAttribute(\"shader\",\"msdf\"),s.setAttribute(\"negate\",\"false\"),s.setAttribute(\"keyboard-button\",!0),s.setAttribute(\"class\",\"collidable\"),n.appendChild(r),n.appendChild(s),this.el.appendChild(n)}drawKeyboard(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild);if(this.keyboardKeys){const e=this.keyboardKeys[this.activeMode]||this.keyboardKeys.normal,t=document.createElement(\"a-entity\"),a=.52,d=.04*e.length+.004*(e.length-1)+.04;t.setAttribute(\"position\",`${a/2-.02} ${-d/2+.02} -0.01`),t.setAttribute(\"geometry\",`primitive: plane; width: ${a}; height: ${d}`),this.baseTexture&&this.baseTexture.length>0?t.setAttribute(\"material\",`src: ${this.baseTexture}`):t.setAttribute(\"material\",\"color: #4a4a4a; side: double; opacity: 0.7\"),this.el.appendChild(t);let n=0;for(let t=0;t<e.length;t++){const a=e[t];let d=0;for(let e=0;e<a.length;e++){const t=a[e],r=this.parseKeyObjects(t);if(!this.dismissable&&\"cancel\"===t.type)continue;const s=r.size.split(\" \")[0],l=r.size.split(\" \")[1];this.drawButton({key:r,position:`${d+s/2} ${n-l/2} 0`}),d+=parseFloat(s)+.004,a.length===e+1&&(n-=.044)}}}}toggleActiveMode(e){e===this.activeMode?(this.activeMode=\"normal\",this.drawKeyboard()):(this.activeMode=e,this.drawKeyboard())}parseKeyObjects(e){const t=e.type,a=e.value;switch(t){case\"delete\":return{size:\"0.04 0.04 0\",value:a,code:\"8\"};case\"enter\":return{size:\"0.04 0.084 0\",value:a,code:\"13\"};case\"shift\":return{size:\"0.084 0.04 0\",value:a,code:\"16\"};case\"alt\":return{size:\"0.084 0.04 0\",value:a,code:\"18\"};case\"space\":return{size:`${.2+.016} 0.04 0`,value:a,code:\"32\"};case\"cancel\":return{size:\"0.084 0.04 0\",value:a,code:\"24\"};case\"submit\":return{size:\"0.084 0.04 0\",value:a,code:\"06\"};default:return{size:\"0.04 0.04 0\",value:a,code:a.charCodeAt(0)}}}}},function(e,t,a){const d=a(6);e.exports=function(e){switch(e){case\"en\":default:return d}}},function(e,t){e.exports={name:\"ms-US-International\",normal:[[{value:\"1\",type:\"standard\"},{value:\"2\",type:\"standard\"},{value:\"3\",type:\"standard\"},{value:\"4\",type:\"standard\"},{value:\"5\",type:\"standard\"},{value:\"6\",type:\"standard\"},{value:\"7\",type:\"standard\"},{value:\"8\",type:\"standard\"},{value:\"9\",type:\"standard\"},{value:\"0\",type:\"standard\"},{value:\"<-\",type:\"delete\"}],[{value:\"q\",type:\"standard\"},{value:\"w\",type:\"standard\"},{value:\"e\",type:\"standard\"},{value:\"r\",type:\"standard\"},{value:\"t\",type:\"standard\"},{value:\"y\",type:\"standard\"},{value:\"u\",type:\"standard\"},{value:\"i\",type:\"standard\"},{value:\"o\",type:\"standard\"},{value:\"p\",type:\"standard\"},{value:\"Ent\",type:\"enter\"}],[{value:\"a\",type:\"standard\"},{value:\"s\",type:\"standard\"},{value:\"d\",type:\"standard\"},{value:\"f\",type:\"standard\"},{value:\"g\",type:\"standard\"},{value:\"h\",type:\"standard\"},{value:\"j\",type:\"standard\"},{value:\"k\",type:\"standard\"},{value:\"l\",type:\"standard\"},{value:'\"',type:\"standard\"}],[{value:\"Shift\",type:\"shift\"},{value:\"z\",type:\"standard\"},{value:\"x\",type:\"standard\"},{value:\"c\",type:\"standard\"},{value:\"v\",type:\"standard\"},{value:\"b\",type:\"standard\"},{value:\"n\",type:\"standard\"},{value:\"m\",type:\"standard\"},{value:\"Alt\",type:\"alt\"}],[{value:\"Cancel\",type:\"cancel\"},{value:\"\",type:\"space\"},{value:\",\",type:\"standard\"},{value:\".\",type:\"standard\"},{value:\"Submit\",type:\"submit\"}]],shift:[[{value:\"1\",type:\"standard\"},{value:\"2\",type:\"standard\"},{value:\"3\",type:\"standard\"},{value:\"4\",type:\"standard\"},{value:\"5\",type:\"standard\"},{value:\"6\",type:\"standard\"},{value:\"7\",type:\"standard\"},{value:\"8\",type:\"standard\"},{value:\"9\",type:\"standard\"},{value:\"0\",type:\"standard\"},{value:\"<-\",type:\"delete\"}],[{value:\"Q\",type:\"standard\"},{value:\"W\",type:\"standard\"},{value:\"E\",type:\"standard\"},{value:\"R\",type:\"standard\"},{value:\"T\",type:\"standard\"},{value:\"Y\",type:\"standard\"},{value:\"U\",type:\"standard\"},{value:\"I\",type:\"standard\"},{value:\"O\",type:\"standard\"},{value:\"P\",type:\"standard\"},{value:\"Ent\",type:\"enter\"}],[{value:\"A\",type:\"standard\"},{value:\"S\",type:\"standard\"},{value:\"D\",type:\"standard\"},{value:\"F\",type:\"standard\"},{value:\"G\",type:\"standard\"},{value:\"H\",type:\"standard\"},{value:\"J\",type:\"standard\"},{value:\"K\",type:\"standard\"},{value:\"L\",type:\"standard\"},{value:'\"',type:\"standard\"}],[{value:\"Shift\",type:\"shift\"},{value:\"Z\",type:\"standard\"},{value:\"X\",type:\"standard\"},{value:\"C\",type:\"standard\"},{value:\"V\",type:\"standard\"},{value:\"B\",type:\"standard\"},{value:\"N\",type:\"standard\"},{value:\"M\",type:\"standard\"},{value:\"Alt\",type:\"alt\"}],[{value:\"Cancel\",type:\"cancel\"},{value:\"\",type:\"space\"},{value:\",\",type:\"standard\"},{value:\".\",type:\"standard\"},{value:\"Submit\",type:\"submit\"}]],alt:[[{value:\"1\",type:\"standard\"},{value:\"2\",type:\"standard\"},{value:\"3\",type:\"standard\"},{value:\"4\",type:\"standard\"},{value:\"5\",type:\"standard\"},{value:\"6\",type:\"standard\"},{value:\"7\",type:\"standard\"},{value:\"8\",type:\"standard\"},{value:\"9\",type:\"standard\"},{value:\"0\",type:\"standard\"},{value:\"<-\",type:\"delete\"}],[{value:\"~\",type:\"standard\"},{value:\"`\",type:\"standard\"},{value:\"|\",type:\"standard\"},{value:\"(\",type:\"standard\"},{value:\")\",type:\"standard\"},{value:\"^\",type:\"standard\"},{value:\"_\",type:\"standard\"},{value:\"-\",type:\"standard\"},{value:\"=\",type:\"standard\"},{value:\"!\",type:\"standard\"},{value:\"Ent\",type:\"enter\"}],[{value:\"@\",type:\"standard\"},{value:\"#\",type:\"standard\"},{value:\"$\",type:\"standard\"},{value:\"%\",type:\"standard\"},{value:\"*\",type:\"standard\"},{value:\"[\",type:\"standard\"},{value:\"]\",type:\"standard\"},{value:\"#\",type:\"standard\"},{value:\"<\",type:\"standard\"},{value:\"?\",type:\"standard\"}],[{value:\"Shift\",type:\"shift\"},{value:\":\",type:\"standard\"},{value:\";\",type:\"standard\"},{value:\"{\",type:\"standard\"},{value:\"}\",type:\"standard\"},{value:\"/\",type:\"standard\"},{value:\"\\\\\",type:\"standard\"},{value:\">\",type:\"standard\"},{value:\"Alt\",type:\"alt\"}],[{value:\"Cancel\",type:\"cancel\"},{value:\"\",type:\"space\"},{value:\",\",type:\"standard\"},{value:\".\",type:\"standard\"},{value:\"Submit\",type:\"submit\"}]]}}]);","// https://gist.github.com/stringparser/a3b0555fd915138a0ed3 edited version from DOM2AFrame\n;[Element].forEach(function (self) {\n\n  //self.prototype.eventListenerList = {}; // shared STATIC object across all instances... NOT what we want\n  self.prototype._addEventListener = self.prototype.addEventListener;\n  self.prototype.addEventListener = function (type, handle, useCapture) {\n\n    if (!this.eventListenerList)\n      this.eventListenerList = {};\n\n    useCapture = useCapture === void 0 ? false : useCapture;\n    var node = this;\n\n    node._addEventListener(type, handle, useCapture);\n    if (!node.eventListenerList[type]) {\n      node.eventListenerList[type] = [];\n    }\n\n    node.eventListenerList[type].push({\n      type: type,\n      handle: handle,\n      useCapture: useCapture,\n      remove: function () {\n        node.removeEventListener(\n          this.type, this.handle, this.useCapture\n        );\n        return node.eventListenerList[type];\n      }\n    });\n\n    if (type != \"eventListenerAdded\" && type != \"eventListenerRemoved\") {\n      let eventDetail = {\n        'type': type,\n        'handle': handle,\n        'useCapture': useCapture\n      };\n      let addedEvent = new CustomEvent(\"eventListenerAdded\", { detail: eventDetail });\n      this.dispatchEvent(addedEvent);\n    }\n  };\n\n\n  self.prototype._removeEventListener = self.prototype.removeEventListener;\n  self.prototype.removeEventListener = function (type, handle, useCapture) {\n\n    if (!this.eventListenerList)\n      this.eventListenerList = {};\n\n    var node = this;\n    if (!node.eventListenerList[type])\n      return;\n\n    node._removeEventListener(type, handle, useCapture);\n    node.eventListenerList[type] = node.eventListenerList[type].filter(\n      function (listener) {\n        return listener && listener.handle && handle && (listener.handle.toString() !== handle.toString()); // native event listener API supports empty handles/listeners, but .toString obviously doesn't\n      }\n    )\n\n    if (node.eventListenerList[type].length === 0) {\n      delete node.eventListenerList[type];\n    }\n\n\n    if (type != \"eventListenerAdded\" && type != \"eventListenerRemoved\") {\n      let eventDetail = {\n        'type': type,\n        'handle': handle,\n        'useCapture': useCapture\n      };\n      let removedEvent = new CustomEvent(\"eventListenerRemoved\", { detail: eventDetail });\n      this.dispatchEvent(removedEvent);\n    }\n  }\n});","import \"./components/scrollbar\";\r\nexport default class Scroll {\r\n    constructor(web2vr) {\r\n        this.web2vr = web2vr;\r\n\r\n        this.hasScroll = false;\r\n        this.scrollBody = false;\r\n        this.scrollContainer = null;\r\n        if (this.web2vr.settings.scroll) {\r\n            this.checkScrollbar();\r\n            if (this.hasScroll)\r\n                this.createScrollbar();\r\n        }\r\n    }\r\n\r\n    checkScrollbar() {\r\n        // entire body scroll\r\n        const body = document.scrollingElement;\r\n        // div container scroll\r\n        const container = this.web2vr.container;\r\n\r\n        if (body.scrollHeight > body.clientHeight) {\r\n            this.hasScroll = true;\r\n            this.scrollContainer = body;\r\n            this.scrollBody = true;\r\n        }\r\n        else if (container.element.style.overflow == \"scroll\") { //container.scrollHeight > container.clientHeight\r\n            this.hasScroll = true;\r\n            this.scrollContainer = container;\r\n        }\r\n    }\r\n\r\n    createScrollbar() {\r\n        this.scrollbar = document.createElement(\"a-entity\");\r\n\r\n        this.pointer = document.createElement(\"a-plane\");\r\n        this.pointer.setAttribute(\"material\", \"shader\", \"flat\");\r\n        this.pointer.setAttribute(\"color\", \"#C1C1C1\");\r\n\r\n        this.plane = document.createElement(\"a-plane\");\r\n        this.plane.setAttribute(\"material\", \"shader\", \"flat\");\r\n        this.plane.setAttribute(\"material\", \"side\", \"double\");\r\n        this.plane.classList.add(this.web2vr.settings.interactiveTag);\r\n        this.plane.setAttribute(\"color\", \"#F1F1F1\");\r\n        this.plane.setAttribute(\"width\", 1);\r\n        this.plane.setAttribute(\"vr-scrollbar\", \"\");\r\n\r\n        // pointers for scroll compoment\r\n        this.plane.web2vr = this.web2vr;\r\n        this.plane.pointer = this.pointer;\r\n        this.plane.scrollbar = this.scrollbar;\r\n\r\n        this.plane.appendChild(this.pointer);\r\n        this.scrollbar.appendChild(this.plane);\r\n        this.web2vr.aframe.container.appendChild(this.scrollbar);\r\n    }\r\n\r\n    update() {\r\n        // there is no need to show scrollbar if the main container is hidden\r\n        if (this.hasScroll) {\r\n            if (this.web2vr.container.element.style.visibility == \"visible\") {\r\n                this.scrollbar.object3D.visible = true;\r\n                this.plane.classList.add(this.web2vr.settings.interactiveTag);\r\n            }\r\n            else if (this.web2vr.container.element.style.visibility == \"hidden\") {\r\n                this.scrollbar.object3D.visible = false;\r\n                this.plane.classList.remove(this.web2vr.settings.interactiveTag);\r\n            }\r\n        }\r\n    }\r\n}","export default class Settings {\r\n    constructor() {\r\n        this.scale = 600;\r\n        this.position = { x: 0, y: 2, z: -1 }\r\n        this.rotation = { x: 0, y: 0, z: 0 }\r\n        this.layerStep = 0.0005; // z space between the layers\r\n\r\n        this.parentSelector= null;\r\n        this.interactiveTag = \"vr-interactable\";\r\n        this.ignoreTags = [\"BR\", \"SOURCE\", \"SCRIPT\", \"AUDIO\", \"NOSCRIPT\"];\r\n\r\n        this.debug = false;\r\n        this.showClipping = false;\r\n        this.forceClipping = false;\r\n        this.experimental = false;\r\n\r\n        this.scroll = true;\r\n        this.scrollWindowHeight = 800;\r\n        this.createControllers = true;\r\n        this.raycasterFar = 5;\r\n        this.skybox = true;\r\n        this.border = true;\r\n    }\r\n}                  ","export default class Helper {\r\n    static isUrl(string) {\r\n        const regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\r\n        return regexp.test(string);\r\n    }\r\n\r\n    static clamp(value, min, max) {\r\n        return Math.min(max, Math.max(min, value));\r\n    }\r\n}","export default class MouseEventHandler {\r\n    constructor(element) {\r\n        this.element = element;\r\n        this.listeningForMouseEvents = false;\r\n        this.resync();\r\n        this.checkEntityEvents();\r\n    }\r\n\r\n    resync() {\r\n        const mouseEvents = [\"click\", \"mouseenter\", \"mouseleave\", \"mousedown\", \"mouseup\"];\r\n        const mouseProperties = [\"onclick\", \"onmouseenter\", \"onmouseleave\", \"onmousedown\", \"onmouseup\"];\r\n\r\n        let hasMouseEventRegistered = false;\r\n        for (const mouseEvent of mouseEvents) {\r\n            if (this.element.domElement.eventListenerList && this.element.domElement.eventListenerList[mouseEvent]) {\r\n                hasMouseEventRegistered = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        let hasMouseProperty = false;\r\n        for (const mouseProperty of mouseProperties) {\r\n            if (this.element.domElement[mouseProperty]) {\r\n                hasMouseProperty = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (hasMouseEventRegistered || hasMouseProperty) {\r\n            if (!this.listeningForMouseEvents) {\r\n                this.addMouseListeners(mouseEvents);\r\n                this.listeningForMouseEvents = true;\r\n            }\r\n        }\r\n        // no event handlers or event properties registered, so we can safely remove our listeners\r\n        else if (this.listeningForMouseEvents) {\r\n            this.removeMouseListeners(mouseEvents);\r\n            this.listeningForMouseEvents = false;\r\n        }\r\n    }\r\n    mouseEventHandler(evt) {\r\n        const mouseEvent = new MouseEvent(evt.type, {\r\n            \"view\": window,\r\n            \"bubbles\": true,\r\n            \"cancelable\": true,\r\n            \"target\": this.element.domElement // maybe?\r\n        });\r\n        this.element.domElement.dispatchEvent(mouseEvent);\r\n    }\r\n\r\n    addMouseListeners(mouseEvents) {\r\n        mouseEvents.forEach(eventName => {\r\n            this.element.entity.addEventListener(eventName, this.mouseEventHandler.bind(this))\r\n        })\r\n    }\r\n\r\n    removeMouseListeners(mouseEvents) {\r\n        mouseEvents.forEach(eventName => {\r\n            this.element.entity.removeEventListener(eventName, this.mouseEventHandler.bind(this))\r\n        });\r\n    }\r\n\r\n    // for hover and input element\r\n    checkEntityEvents() {\r\n        const mouseEvents = [\"click\", \"mouseenter\", \"mouseleave\", \"mousedown\", \"mouseup\"];\r\n        for (const mouseEvent of mouseEvents) {\r\n            if (this.element.entity.eventListenerList && this.element.entity.eventListenerList[mouseEvent]) {\r\n                this.listeningForMouseEvents = true;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}","export default class Position {\r\n    constructor(domPosition, depth, scale) {\r\n        // depth = z\r\n        this.depth = depth;\r\n        this.startDepth = depth;\r\n        this.scale = scale;\r\n        this.scrollY = 0;\r\n        this.updatePosition(domPosition);\r\n    }\r\n\r\n    updatePosition(domPosition) {\r\n        this.domPosition = domPosition;\r\n        this.aframePosition = this.calculateAFramePosition(this.domPosition);\r\n    }\r\n\r\n    calculateAFramePosition(domPosition) {\r\n        // making positions be in center because dom positions are in top left\r\n        const aframePosition = {\r\n            x: domPosition.x + domPosition.width / 2,\r\n            y: domPosition.y + domPosition.height / 2,\r\n            z: this.depth\r\n        };\r\n\r\n        // scaling\r\n        aframePosition.x *= this.scalingFactor;\r\n        aframePosition.y *= this.scalingFactor * -1; // * -1 to match aframe y-axis\r\n\r\n        aframePosition.width = domPosition.width * this.scalingFactor;\r\n        aframePosition.height = domPosition.height * this.scalingFactor;\r\n\r\n        return aframePosition;\r\n    }\r\n\r\n    equalsDOMPosition(domPosition) {\r\n        return this.domPosition.top == domPosition.top && this.domPosition.bottom == domPosition.bottom && this.domPosition.left == domPosition.left && this.domPosition.right == domPosition.right;\r\n    }\r\n\r\n    get scalingFactor() {\r\n        return 1 / this.scale;\r\n    }\r\n\r\n    get x() {\r\n        return this.aframePosition.x;\r\n    }\r\n\r\n    get y() {\r\n        return this.aframePosition.y + this.scrollY;\r\n    }\r\n\r\n    get z() {\r\n        return this.aframePosition.z;\r\n    }\r\n\r\n    get width() {\r\n        return this.aframePosition.width;\r\n    }\r\n\r\n    get height() {\r\n        return this.aframePosition.height;\r\n    }\r\n\r\n    // vector3\r\n    get xyz() {\r\n        return { x: this.x, y: this.y, z: this.z };\r\n    }\r\n\r\n    get left() {\r\n        return { x: this.x - this.width / 2, y: this.y, z: this.z };\r\n    }\r\n\r\n    get right() {\r\n        return { x: this.x + this.width / 2, y: this.y, z: this.z };\r\n    }\r\n\r\n    get top() {\r\n        return { x: this.x, y: this.y + this.height / 2, z: this.z };\r\n    }\r\n\r\n    get bottom() {\r\n        return { x: this.x, y: this.y - this.height / 2, z: this.z };\r\n    }\r\n\r\n}","import \"./plugins/eventListenerListPlugin\"; // Get all event listeners for DOM elements\r\nimport Deepmerge from \"deepmerge\";\r\nimport \"aframe\";\r\nimport \"aframe-gif-shader\";\r\nimport \"./plugins/aframe-keyboard.min\";\r\nimport \"super-hands\";\r\nimport Settings from \"./settings\";\r\nimport \"./components/border\";\r\nimport \"./components/animate\";\r\nimport \"./components/grabRotateStatic\";\r\nimport Scroll from \"./scroll\"\r\nimport AframeContext from \"./aframeContext\";\r\nimport ContainerElement from \"./elements/containerElement\";\r\nimport TextElement from \"./elements/textElement\";\r\nimport ImageElement from \"./elements/imageElement\";\r\nimport VideoElement from \"./elements/videoElement\";\r\nimport CheckBoxElement from \"./elements/checkboxElement\";\r\nimport RadioElement from \"./elements/radioElement\";\r\nimport InputElement from \"./elements/inputElement\";\r\nimport ButtonElement from \"./elements/buttonElement\";\r\nimport SvgElement from \"./elements/svgElement\";\r\nimport CanvasElement from \"./elements/canvasElement\";\r\n\r\nexport default class Web2VR {\r\n    constructor(container, settings = {}) {\r\n        // main div container\r\n        if (container.nodeType == Node.ELEMENT_NODE)\r\n            this.container = container;\r\n        else\r\n            this.container = document.querySelector(container);\r\n\r\n        // deep merge settings\r\n        this.settings = Deepmerge(new Settings(), settings, {\r\n            arrayMerge: (destination, source) => {\r\n                return [...destination, ...source];\r\n            }\r\n        });\r\n\r\n        // aframe context\r\n        this.aframe = new AframeContext(this.settings);\r\n        // vr elements\r\n        this.elements = new Set();\r\n        // set of all the hover css selectors\r\n        this.hoverSelectors = new Set();\r\n        this.observer = null;\r\n        // observer parametars\r\n        this.observerConfig = { childList: true, subtree: true, characterData: true, attributes: true };//attributeFilter: [\"style\", \"class\", \"id\"]\r\n        this.updating = false;\r\n\r\n        // experimental only\r\n        this.html2canvasIDcounter = 0;\r\n    }\r\n\r\n    // find all hover css rules and add {selector}hover class to them\r\n    findHoverCss() {\r\n        try {\r\n            for (const styleSheet of [...document.styleSheets]) {\r\n                for (const rule of [...styleSheet.cssRules]) {\r\n                    if (rule instanceof CSSStyleRule) {\r\n                        const selectors = rule.selectorText.split(\",\");\r\n                        for (const selector of selectors) {\r\n                            const sel = selector.split(\":\");\r\n                            // is hover\r\n                            if (sel[1] == \"hover\") {\r\n                                const s = sel[0].replace(/\\s/g, '');\r\n                                if (s[0] == \".\")\r\n                                    rule.selectorText += `, ${s}hover`;\r\n                                else if (s[0] == \"#\")\r\n                                    rule.selectorText += `, .${s.substr(1)}hover`;\r\n                                else\r\n                                    rule.selectorText += `, .${s}hover`;\r\n                                this.hoverSelectors.add(s);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    // add all svg needed styles to defs inside svg so we can convert svg to png with all styles applied \r\n    generateStyleDefs(svgDomElement) {\r\n        let styleDefs = \"\";\r\n        const sheets = document.styleSheets;\r\n        for (let i = 0; i < sheets.length; i++) {\r\n            const rules = sheets[i].cssRules;\r\n            for (let j = 0; j < rules.length; j++) {\r\n                const rule = rules[j];\r\n                if (rule.style) {\r\n                    const selectorText = rule.selectorText;\r\n                    const elems = svgDomElement.querySelectorAll(selectorText);\r\n                    if (elems.length) {\r\n                        styleDefs += selectorText + \" { \" + rule.style.cssText + \" }\\n\";\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        const s = document.createElement('style');\r\n        s.setAttribute('type', 'text/css');\r\n        s.innerHTML = styleDefs;\r\n\r\n        const defs = document.createElement('defs');\r\n        defs.appendChild(s);\r\n        svgDomElement.insertBefore(defs, svgDomElement.firstChild);\r\n    }\r\n\r\n    start() {\r\n        this.findHoverCss();\r\n\r\n        if (!this.aframe.scene.hasLoaded)\r\n            this.aframe.scene.addEventListener(\"loaded\", this.init(), { once: true });\r\n        else\r\n            this.init();\r\n    }\r\n\r\n    init() {\r\n        this.aframe.createContainer(this);\r\n        this.aframe.createSky();\r\n        this.aframe.createControllers();\r\n\r\n        this.convertToVR();\r\n        // scroll feature\r\n        this.scroll = new Scroll(this);\r\n\r\n        this.allLoadedUpdate();\r\n    }\r\n\r\n    // update once after all images are loaded in the dom\r\n    allLoadedUpdate() {\r\n        const interval = setInterval(() => {\r\n            let allLoaded = true;\r\n            for (const element of this.elements)\r\n                if (element instanceof ImageElement && !element.loaded)\r\n                    allLoaded = false;\r\n            if (allLoaded) {\r\n                this.update();\r\n                clearInterval(interval);\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n    addElement(domElement, parentElement, layer) {\r\n        // ignore tag if in ignoreTags list or text element(vr-span) is already added\r\n        if (this.settings.ignoreTags.includes(domElement.tagName) || (domElement.classList && domElement.classList.contains(\"vr-span\")))\r\n            return null;\r\n\r\n        let element = null;\r\n        // its text node and not empty\r\n        if (domElement.nodeType == Node.TEXT_NODE && domElement.nodeValue.trim()) {\r\n            const span = document.createElement(\"span\");\r\n            span.classList.add(\"vr-span\");\r\n            span.textContent = domElement.textContent;\r\n\r\n            // dont want observer to listen changes when adding(replacing) span text into dom\r\n            if (this.observer)\r\n                this.observer.disconnect();\r\n            domElement.replaceWith(span);\r\n            if (this.observer)\r\n                this.observer.observe(this.container, this.observerConfig);\r\n\r\n            element = new TextElement(this, span, layer);\r\n        }\r\n        // for future convert this to switch statement\r\n        else if (domElement.tagName == \"VIDEO\")\r\n            element = new VideoElement(this, domElement, layer);\r\n        else if (domElement.tagName == \"IMG\")\r\n            element = new ImageElement(this, domElement, layer);\r\n        else if (domElement.tagName == \"svg\")\r\n            element = new SvgElement(this, domElement, layer);\r\n        else if (domElement.tagName == \"CANVAS\")\r\n            element = new CanvasElement(this, domElement, layer);\r\n        else if (domElement.tagName == \"BUTTON\")\r\n            element = new ButtonElement(this, domElement, layer);\r\n        else if (domElement.tagName == \"TEXTAREA\")\r\n            element = new InputElement(this, domElement, layer);\r\n        else if (domElement.tagName == \"INPUT\") {\r\n            const type = domElement.getAttribute(\"type\");\r\n            if (type == \"checkbox\")\r\n                element = new CheckBoxElement(this, domElement, layer);\r\n            else if (type == \"radio\")\r\n                element = new RadioElement(this, domElement, layer);\r\n            else if ([\"text\", \"email\", \"number\", \"password\", \"search\", \"tel\", \"url\"].includes(type))\r\n                element = new InputElement(this, domElement, layer);\r\n            else if ([\"button\", \"submit\", \"reset\"].includes(type)) {\r\n                element = new ButtonElement(this, domElement, layer);\r\n            }\r\n            else\r\n                return;\r\n        }\r\n        // any other type of element will be container\r\n        else if (domElement.nodeType == Node.ELEMENT_NODE) {\r\n            element = new ContainerElement(this, domElement, layer);\r\n        }\r\n        else\r\n            return;\r\n\r\n        this.elements.add(element);\r\n        this.aframe.container.appendChild(element.entity);\r\n\r\n        if (this.settings.debug)\r\n            console.log(\"Added element\", element);\r\n\r\n        // init element and add element to parent children when aframe entity is loaded(play)\r\n        const onLoaded = (event) => {\r\n            if (parentElement)\r\n                parentElement.childElements.add(element);\r\n            element.init();\r\n            element.update();\r\n        };\r\n        element.entity.addEventListener(\"play\", onLoaded, { once: true });\r\n\r\n        return element;\r\n    }\r\n\r\n    removeElement(element) {\r\n        // remove the element\r\n        this.aframe.container.removeChild(element.entity);\r\n        this.elements.delete(element);\r\n        // remove all the children of the element recursively\r\n        for (const child of element.childElements) {\r\n            this.removeElement(child);\r\n        }\r\n    }\r\n\r\n    // start at root and interate over child nodes recursively\r\n    addElementChildren(currentNode, parentElement = null, layer = 0) {\r\n        if (currentNode.tagName == \"svg\")\r\n            this.generateStyleDefs(currentNode);\r\n\r\n        const element = this.addElement(currentNode, parentElement, layer);\r\n        // not supported tags or svg element that we dont need to check its children\r\n        if (!element || element instanceof SvgElement)\r\n            return;\r\n\r\n        if (currentNode.childNodes && currentNode.childNodes.length > 0) {\r\n            layer++;\r\n            for (const child of currentNode.childNodes)\r\n                this.addElementChildren(child, element, layer);\r\n        }\r\n    }\r\n\r\n    convertToVR() {\r\n        this.addElementChildren(this.container);\r\n        // observer dom element changes and for newly added and deleted dom elements\r\n        this.observer = new MutationObserver((mutations) => {\r\n            for (const mutation of mutations) {\r\n                let emptyRemove = false;\r\n                for (const node of mutation.removedNodes) {\r\n                    // not empty textNode\r\n                    if (!(node.nodeType == Node.TEXT_NODE && !node.nodeValue.trim()))\r\n                        this.removeElement(node.element);\r\n                    else\r\n                        emptyRemove = true;\r\n                }\r\n\r\n                for (const node of mutation.addedNodes)\r\n                    this.addElementChildren(node, mutation.target.element, mutation.target.element.layer + 1);\r\n\r\n                if (!emptyRemove) {\r\n                    // when adding new nodes we also need to check for new loaded images\r\n                    if (mutation.addedNodes.length > 0)\r\n                        this.allLoadedUpdate();\r\n                    else\r\n                        this.update();\r\n                }\r\n            }\r\n        });\r\n        this.observer.observe(this.container, this.observerConfig);\r\n    }\r\n\r\n    update() {\r\n        // we check for updating so we dont do multiple updating at same time from the async functions\r\n        this.updating = true;\r\n        if (this.updating) {\r\n            // using try and catch because sometimes when element is removed it calls update after and it wont find element, the errors doesnt matter because the final result is the same\r\n            try {\r\n                for (const element of this.elements)\r\n                    element.update();\r\n            }\r\n            catch (err) {\r\n                console.error(err);\r\n            }\r\n            this.scroll.update();\r\n            this.updating = false;\r\n        }\r\n    }\r\n}","module.exports = __WEBPACK_EXTERNAL_MODULE_aframe__;"],"sourceRoot":""}